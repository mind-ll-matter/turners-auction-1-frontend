function lazyLoadGmaps(n){mapInstances=[];$(n).lazyLoadGoogleMaps({callback:function(n,t){var i=$(n),r=new google.maps.LatLng(i.attr("data-lat"),i.attr("data-lng")),u;t.setOptions({zoom:15,center:r,scrollwheel:!1});new google.maps.Marker({position:r,map:t});$.data(t,"center",r);mapInstances.push(t);u=function(){$.data(t,"center",t.getCenter())};google.maps.event.addListener(t,"dragend",u);google.maps.event.addListener(t,"zoom_changed",u);google.maps.event.addListenerOnce(t,"idle",function(){i.addClass("is-loaded")})},api_key:"AIzaSyCEtIi1kPExG6GaaENPR-cU91522Mwuz6M"})}function stickyHeader(){common.scrollPosition=$(window).scrollTop();enquire.register("screen and (min-width:1024px)",{match:function(){common.scrollPosition>=common.headerHeight?common.stickyHeader.enableStickyHeader():common.stickyHeader.disableStickyHeader()},unmatch:function(){common.stickyHeader.disableStickyHeader()}})}function captureSumoSelectValue(n){return $(n).find(".selected").attr("data-val")}function debounce(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}}function emailFriendCatchaResponse(n){common.emailFriends.eventHandlers.captchaCallback(n)}var common,searchPanel,searchBox;(function(n,t){var i=function(n,t,i){var r;return function(){function e(){i||n.apply(u,f);r=null}var u=this,f=arguments;r?clearTimeout(r):i&&n.apply(u,f);r=setTimeout(e,t||100)}};jQuery.fn[t]=function(n){return n?this.bind("resize",i(n)):this.trigger(t)}})(jQuery,"smartresize"),function(n,t){var i=function(n,t,i){var r;return function(){function e(){i||n.apply(u,f);r=null}var u=this,f=arguments;r?clearTimeout(r):i&&n.apply(u,f);r=setTimeout(e,t||100)}};jQuery.fn[t]=function(n,r){return n?this.bind("scroll",i(n,r)):this.trigger(t)}}(jQuery,"smartscroll");$(document).ready(function(){var n;$(".main img.lazy").lazyload({threshold:200,effect:"fadeIn",placeholder:""});n=jQuery("body");$(document).on("focus","input",function(){n.addClass("iOS-position-fixed-hack")}).on("blur","input",function(){n.removeClass("iOS-position-fixed-hack")});stickyHeader();$(window).scroll(stickyHeader);$(".responsive-table").stacktable();new $.Zebra_Tooltips($(".tooltip"),{background_color:"#363636",color:"#FFF"});$(".custom-select-dropdown").SumoSelect({forceCustomRendering:!0});$(".custom-search-dropdown").SumoSelect({forceCustomRendering:!0,search:!0,searchText:"Enter here. "});$(".SumoSelect .optWrapper li").click(function(n){n.stopPropagation();$("select.custom-select-dropdown")[0].sumo.reload()});$(".view-map-trigger").click(function(){var n=$(this),t=n.closest(".row-detail").find(".onclick-lazyload-google-map"),i=n.closest(".row-detail").find(".google-map-other-info");t.hasClass("active")?(n.text("View Map"),t.removeClass("active"),i.removeClass("active")):(n.text("Hide Map"),t.addClass("active"),i.addClass("active"),lazyLoadGmaps(t))});var i=$(window),t=[],r=$(".lazy-google-map").lazyLoadGoogleMaps({callback:function(n,i){var r=$(n),u=new google.maps.LatLng(r.attr("data-lat"),r.attr("data-lng")),f;i.setOptions({zoom:15,center:u,scrollwheel:!1});new google.maps.Marker({position:u,map:i});$.data(i,"center",u);t.push(i);f=function(){$.data(i,"center",i.getCenter())};google.maps.event.addListener(i,"dragend",f);google.maps.event.addListener(i,"zoom_changed",f);google.maps.event.addListenerOnce(i,"idle",function(){r.addClass("is-loaded")})},api_key:"AIzaSyCEtIi1kPExG6GaaENPR-cU91522Mwuz6M"});i.on("resize",r.debounce(1e3,function(){$.each(t,function(){this.setCenter($.data(this,"center"))})}));$(".calendar-trigger").click(function(n){n.stopPropagation();var t=$(this).closest(".calendar-fields-container").find(".datepicker-on-click").pickadate({format:"dd/mm/yyyy",selectYears:!0,autoclose:!0}),i=t.pickadate("picker");i.open()});$(".age-restriction-calendar-trigger").click(function(n){n.stopPropagation();var t=new Date,r=new Date(t.getFullYear()-18,t.getMonth(),t.getDate()),u=new Date(t.getFullYear()-118,t.getMonth(),t.getDate()),f=$(this).closest(".calendar-fields-container").find(".datepicker-on-click-age-restriction").pickadate({format:"dd/mm/yyyy",selectYears:100,autoclose:!0,min:u}),i=f.pickadate("picker");i.open();i.set("select",r)});$(document).mousedown(function(n){$(n.target).closest(".search-panel, .search-panel-trigger, .account-panel, .account-panel-trigger, .large-screen-main-menu .sub-menu-trigger, .large-screen-main-menu .sub-menu").length===0&&(common.header.helpers.closeAccountPanel(),common.mainMenu.helpers.LSCloseAllSubMenus())});$(document).on("click",".view-password-trigger",function(n){n.preventDefault();var i=$(this),t=i.prev();i.hasClass("active")?t.clone().attr("type","password").insertAfter(t).prev().remove():t.clone().attr("type","text").insertAfter(t).prev().remove();i.toggleClass("active")})});Handlebars.registerHelper("dateFormat",function(n,t){if(n!=null||n!=undefined){var i=common.functions.parseAspNetDate(n);return dayjs(i).format(t)}});Handlebars.registerHelper("counter",function(n){return n+1});Handlebars.registerHelper("formatToCurrency",function(n){return common.functions.formatCurrency(n)});Handlebars.registerHelper("stringFormat",function(){var t="",n;for(n in arguments)typeof arguments[n]!="object"&&(t+=arguments[n]);return t});Handlebars.registerHelper("convertToString",function(n){return n.toString()});Handlebars.registerHelper("displayFormat",function(n){return n===null||n===undefined?"Unknown":n===!0?"Yes":n===!1?"No":void 0});Handlebars.registerHelper("setVar",function(n,t,i){i.data.root[n]=t});Handlebars.registerHelper("log",function(n){console.log(n)});Handlebars.registerHelper("ifCond",function(n,t,i,r){switch(t){case"==":return n==i?r.fn(this):r.inverse(this);case"===":return n===i?r.fn(this):r.inverse(this);case"!=":return n!=i?r.fn(this):r.inverse(this);case"!==":return n!==i?r.fn(this):r.inverse(this);case"<":return n<i?r.fn(this):r.inverse(this);case"<=":return n<=i?r.fn(this):r.inverse(this);case">":return n>i?r.fn(this):r.inverse(this);case">=":return n>=i?r.fn(this):r.inverse(this);case"&&":return n&&i?r.fn(this):r.inverse(this);case"||":return n||i?r.fn(this):r.inverse(this);default:return r.inverse(this)}});Handlebars.registerHelper("contains",function(n,t,i){if(n!=null&&n!=undefined){if(n.indexOf&&!i)return n.indexOf(t);for(var r=0;r<n.length;){if(i&&n[r][i]==t||!i&&n[r]===t)return r;r++}return 0}return 0});Handlebars.registerHelper("switch",function(n,t){return this.switch_value=n,this.switch_break=!1,t.fn(this)});Handlebars.registerHelper("case",function(n,t){if(n==this.switch_value)return this.switch_break=!0,t.fn(this)});common={trackingResult:{SUCCESS:0,ERRORWITHREQUEST:1,ERRORFROMRESPONSE:2,ERRORFROMCAPTCHA:3},urlWelcomeMessage:"/Client/Content/WelcomeMessage",loginAccountPanel:"/Client/Account/LoginAccountPanel",pageId:null,divisionIndexId:null,isAuthenticated:null,defaultAddressSource:null,scrollPosition:null,stickyAnimationComplete:!0,headerHeight:$("header .content-max-width").outerHeight(),goodRequestData:null,init:function(n,t,i,r,u){common.pageId=n;common.divisionIndexId=t;common.isAuthenticated=i;common.defaultAddressSource=u;common.analytics.init();common.mainMenu.init.module();common.enquiryPanel.init();common.enquiryFinancePanel.init();common.financeCalculator.init();common.emailFriends.init.module();common.watchList.init();common.compare.init();common.slideshow.init();common.turnersCertified.init.module();common.serverRequests.loginAccountPanel();searchPanel.init.module();r==!0&&common.serverRequests.welcomeMessage()},serverRequests:{welcomeMessage:function(){var n={divisionId:common.divisionIndexId};$.ajax({type:"GET",url:common.urlWelcomeMessage,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){!n.error&&n.displayOverlay?(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"WelcomingPopup","Load","",common.urlWelcomeMessage),common.overlay.openContent(n.overlayContent)):common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"WelcomingPopup","Load","",common.urlWelcomeMessage)},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"WelcomingPopup","Load","",common.urlWelcomeMessage)}})},loginAccountPanel:function(){var n={pageId:common.pageId};$.ajax({type:"GET",url:common.loginAccountPanel,data:n,contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(n){$(".loginaccount-outercontainer .account-panel").remove();$(".loginaccount-outercontainer .large-screen-header-content").remove();setTimeout(function(){$(".loginaccount-outercontainer").append(n);common.header.init()},400)},error:function(){}})}},functions:{getScrollBarWidth:function(){var n=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),t=$("<div>").css({width:"100%"}).appendTo(n).outerWidth();return n.remove(),100-t},refreshPage:function(){location.reload(!0)},initForm:function(n,t){t?($(".custom-select-dropdown").SumoSelect({forceCustomRendering:!0,floatWidth:1023}),$(".custom-search-dropdown").SumoSelect({forceCustomRendering:!0,search:!0,searchText:"Enter here. ",floatWidth:1023})):($(".custom-select-dropdown").SumoSelect({forceCustomRendering:!0}),$(".custom-search-dropdown").SumoSelect({forceCustomRendering:!0,search:!0,searchText:"Enter here. "}));$(".SumoSelect .optWrapper li").click(function(n){n.stopPropagation();$("select.custom-select-dropdown")[0].sumo.reload()})},stringFormat:function(){for(var t=arguments[0],i,n=0;n<arguments.length-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),t=t.replace(i,arguments[n+1]);return t},stringTrim:function(n){if(n)return n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},formatCurrency:function(n){var r=",",u=n<0?"-":"",i=parseInt(n=Math.abs(n).toFixed("."))+"",t=(t=i.length)>3?t%3:0;return u+"$"+(t?i.substr(0,t)+r:"")+i.substr(t).replace(/(\d{3})(?=\d)/g,"$1"+r)},serializeObject:function(n){var t={},i=n.serializeArray();return $.each(i,function(){t[this.name]!==undefined?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},removeValueFromArray:function(n,t){return $.grep(n,function(n){return n!=t})},scrollIntoView:function(n){return n.each(function(){$("html, body").animate({scrollTop:$(this).offset().top-$("body header").height()},400)})},capitaliseFirstLetter:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},parseAspNetDate:function(n){var t=/Date\(([^)]+)\)/.exec(n);return new Date(parseFloat(t[1]))},parseNZDate:function(n,t){if(n&&(typeof n=="string"||n instanceof String)){var i=n.split(t);if(i.length==3)return new Date(i[2],i[1]-1,i[0])}return null},parseTime:function(n){if(n&&(typeof n=="string"||n instanceof String)){var t=n.split(":");if(t.length==2)return{hours:t[0],minutes:t[1]}}return null},addMinutes:function(n,t){return new Date(n.getTime()+t*6e4)},addHours:function(n,t){return new Date(n.getTime()+t*36e5)},addDays:function(n,t){return new Date(n.getTime()+t*864e5)},getGoodRequestInfo:function(n){var t;return typeof goodPage!="undefined"?n&&(t=n.closest(".product-block"),t.length>0)?{goodNumber:t.data("goodnumber"),divisionIndex:t.data("divisionindex")}:{pageId:common.pageId}:(t=n.closest(".product-block"),{goodNumber:t.data("goodnumber"),divisionIndex:t.data("divisionindex")})},getSegmentRequestInfo:function(n){var t=null;if(typeof goodPage!="undefined"?n?(t=n.closest(".product-block").find(".analytics-seg-info"),t.length<1&&(t=$(".analytics-seg-info"))):t=$(".analytics-seg-info"):t=n?n.closest(".product-block").find(".analytics-seg-info"):$(".analytics-seg-info"),t!==null){var r=t.data("seg-isdiscounted"),u=t.data("seg-iscampaign"),f=t.data("seg-goodnumber"),e=t.data("seg-make"),o=t.data("seg-model"),s=parseInt(t.data("seg-year")),h=t.data("seg-goodtype"),c=parseInt(t.data("seg-price")),l=t.data("seg-responsiblebranch"),a="online",i={};return r&&(i.isDiscounted=r),u&&(i.isInCampaign=u),f&&(i.goodNumber=f),e&&(i.make=e),o&&(i.model=o),isNaN(s)||(i.year=s),h&&(i.goodType=h),isNaN(c)||(i.price=c),l&&(i.responsibleBranch=l),a&&(i.leadSource=a),i}return null},getQueryStringValue:function(n){for(var r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i,t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1]},getQueryString:function(n,t){var r=t?t:window.location.href,u=new RegExp("[?&]"+n+"=([^&#]*)","i"),i=u.exec(r);return i?i[1]:null},notifyTurnersEvent:function(n,t,i,r,u,f){var e;if(typeof dataLayer!="undefined"){e=document.createElement("a");e.href=window.location;var o=e.pathname[0]==="/"?e.pathname:"/"+e.pathname,s=e.search[0]==="?"?e.search.slice(1):e.search,h=common.functions.objMap(s,"&","=",!0),c={url:e.href||"",queryParameters:h,pathname:o||"",hostname:e.hostname||"",protocol:e.protocol||"",fragment:e.hash||"",timestamp:Date.now()||"",statusCode:n.toString()||"",category:t||"",action:i||"",source:r||"",ajaxUrl:u||"",customData:f||""};dataLayer.push({event:"turners:event",turnersAttr:c})}},objMap:function(n,t,i,r){var e={},u,f;if(!n||!t||!i)return{};if(u=n.split(t),u)for(f=0;f<u.length;f++){var c=r?decodeURIComponent(u[f]):u[f],o=c.split(i),s=common.functions.stringTrim(o[0]),h=common.functions.stringTrim(o[1]);s&&h&&(e[s]=h)}return e}},division:{cars:"car",carsIndex:1e3,trucksAndMachinery:"truck",trucksAndMachineryIndex:1001,damagedAndEndOfLife:"damaged",damagedAndEndOfLifeIndex:1002,boatsAndMarine:"boat",boatsAndMarineIndex:1004,motorcyclesAndScooter:"motorcycle",motorcyclesAndScooterIndex:1005,generalGoods:"generalgood",generalGoodsIndex:1003,caravansAndMotorhomes:"caravan",caravansAndMotorhomesIndex:1006,getIndexByName:function(n){switch(n){case common.division.cars:return common.division.carsIndex;case common.division.trucksAndMachinery:return common.division.trucksAndMachineryIndex;case common.division.damagedAndEndOfLife:return common.division.damagedAndEndOfLifeIndex;case common.division.boatsAndMarine:return common.division.boatsAndMarineIndex;case common.division.motorcyclesAndScooter:return common.division.motorcyclesAndScooterIndex;case common.division.generalGoods:return common.division.generalGoodsIndex;case common.division.caravansAndMotorhomes:return common.division.caravansAndMotorhomesIndex;default:return null}},getNameByIndex:function(n){switch(n){case common.division.carsIndex:return common.division.cars;case common.division.trucksAndMachineryIndex:return common.division.trucksAndMachinery;case common.division.damagedAndEndOfLifeIndex:return common.division.damagedAndEndOfLife;case common.division.boatsAndMarineIndex:return common.division.boatsAndMarine;case common.division.motorcyclesAndScooterIndex:return common.division.motorcyclesAndScooter;case common.division.generalGoodsIndex:return common.division.generalGoods;case common.division.caravansAndMotorhomesIndex:return common.division.caravansAndMotorhomes;default:return null}},getCurrentIndex:function(){return common.divisionIndexId},getCurrentName:function(){return common.division.getNameByIndex(common.divisionIndexId)}},stickyHeader:{enableStickyHeader:function(){jQuery("body").css("padding-top",common.headerHeight+$(".large-screen-main-menu").outerHeight()-3+"px");jQuery("body").addClass("large-screen-sticky-header");jQuery("body").removeClass("small-screen-sticky-header");navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&jQuery("ul.right-menu").hide().show(0);$(".account-panel").insertAfter(".right-menu");$("body").hasClass("open-search-panel")?($("body").css("position","fixed"),$("body").css("top","-"+common.scrollPosition+"px")):$("body").css("position","static");common.mainMenu.helpers.LSCloseAllSubMenus()},disableStickyHeader:function(){jQuery("body").css("padding-top","0px");$("body").css("position","static");jQuery("body").removeClass("large-screen-sticky-header");navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&jQuery("ul.right-menu").hide().show(0);$(".account-panel").insertAfter(".large-screen-header-content");common.mainMenu.helpers.LSCloseAllSubMenus()}},overlay:{close:function(){$.magnificPopup.close()},closeForce:function(){$.magnificPopup.closeForce()},getOverlayElement:function(){return $.magnificPopup.instance.content},openContent:function(n,t){$.magnificPopup.open({items:{src:n,type:"inline"},callbacks:{open:function(){t!==null&&typeof t=="function"&&t()}},preloader:!1,removalDelay:500,fixedContentPos:!1,mainClass:"mfp-zoom-in"})},open:function(n,t){$.magnificPopup.open({items:{src:n,type:"ajax"},callbacks:{open:function(){t!==null&&typeof t=="function"&&t()}},preloader:!1,removalDelay:500,fixedContentPos:!1,mainClass:"mfp-zoom-in"})},openModalContent:function(n,t){$.magnificPopup.open({items:{src:n,type:"inline"},callbacks:{open:function(){t!==null&&typeof t=="function"&&t()}},preloader:!1,removalDelay:500,fixedContentPos:!1,mainClass:"mfp-zoom-in",modal:!0})},openModal:function(n,t){$.magnificPopup.open({items:{src:n,type:"ajax"},callbacks:{ajaxContentAdded:function(){t!==null&&typeof t=="function"&&t()}},preloader:!1,removalDelay:500,fixedContentPos:!1,mainClass:"mfp-zoom-in",modal:!0})},addInlineHandler:function(n,t,i){n.magnificPopup({callbacks:{open:function(){t!==null&&typeof t=="function"&&t()},close:function(){i!==null&&typeof i=="function"&&i()}},type:"inline",preloader:!1,removalDelay:500,fixedContentPos:!1,mainClass:"mfp-zoom-in"})},addAjaxHandler:function(n,t,i){n.magnificPopup({callbacks:{open:function(){t!==null&&typeof t=="function"&&t()},close:function(){i!==null&&typeof i=="function"&&i()}},type:"ajax",preloader:!1,removalDelay:500,fixedContentPos:!1,mainClass:"mfp-zoom-in"})}}};common.login={panel:{submitUrl:"/Client/Account/LoginPanelSubmit",logoutUrl:"/Client/Account/LoginPanelLogout",confirmEmailSubmitUrl:"/Client/Account/LoginPanelConfirmEmailSubmit",preLogin:null,preLogout:null,postLogin:null,$loginForm:null,$logoutButton:null,init:function(){common.login.panel.$loginForm=$(".account-panel.logged-out-state form");common.login.panel.$logoutButton=$(".account-panel.logged-in-state .user-logout-button");common.login.panel.$loginForm.length>0&&($.validator.unobtrusive.parse(common.login.panel.$loginForm),common.login.panel.$loginForm.data("validator").settings.submitHandler=common.login.panel.eventHandlers.submit);common.login.panel.$logoutButton.click(common.login.panel.eventHandlers.logout)},initConfirmationForm:function(){common.login.panel.$loginForm=$(".account-panel.logged-out-state form");common.login.panel.$loginForm.length>0&&($.validator.unobtrusive.parse(common.login.panel.$loginForm),common.login.panel.$loginForm.data("validator").settings.submitHandler=common.login.panel.eventHandlers.confirmEmailSubmit)},eventHandlers:{submit:function(){var n=common.login.panel.helpers.compileForm();common.login.panel.serverRequests.submitLogin(n)},logout:function(n){n.preventDefault();common.login.panel.serverRequests.submitLogout()},confirmEmailSubmit:function(){var n=common.login.panel.helpers.compileForm();common.login.panel.serverRequests.submitConfirmEmail(n)}},serverRequests:{submitLogin:function(n){common.login.panel.preLogin!==null&&typeof common.login.panel.preLogin=="function"&&common.login.panel.preLogin();$.ajax({type:"POST",url:common.login.panel.submitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Login","Submit","AccountPanel",common.login.panel.submitUrl):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Login","Submit","AccountPanel",common.login.panel.submitUrl);n.loginWasSuccessful===!0?(common.login.panel.postLogin!==null&&typeof common.login.panel.postLogin=="function"&&common.login.panel.postLogin(!0),n.isRedirect===!0?window.location=n.redirectUrl:location.reload(!0)):(common.login.panel.postLogin!==null&&typeof common.login.panel.postLogin=="function"&&common.login.panel.postLogin(!1),common.login.panel.$loginForm.replaceWith(n.formContent),n.showEmailConfirmationForm==!0?common.login.panel.initConfirmationForm():common.login.panel.init())},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Login","Submit","AccountPanel",common.login.panel.submitUrl)}})},submitLogout:function(){common.login.panel.preLogout!==null&&typeof common.login.panel.preLogout=="function"&&common.login.panel.preLogout();var n={requestPageUrl:document.URL};$.ajax({type:"POST",url:common.login.panel.logoutUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.logoutWasSuccessful===!0&&(n.isRedirect===!0?window.location=n.redirectUrl:location.reload(!0))},error:function(){}})},submitConfirmEmail:function(n){$.ajax({type:"POST",url:common.login.panel.confirmEmailSubmitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){common.login.panel.$loginForm.replaceWith(n.formContent);n.error===!0?common.login.panel.initConfirmationForm():common.login.panel.init()},error:function(){}})}},helpers:{compileForm:function(){var n=common.login.panel.$loginForm.find("input");return common.functions.serializeObject(n)}}},overlay:{emailPromptUrl:"/Client/Account/LoginOverlay",emailSubmitUrl:"/Client/Account/LoginOverlayEmailSubmit",passwordSubmitUrl:"/Client/Account/LoginOverlayPasswordSubmit",registrationSubmitUrl:"/Client/Account/LoginOverlayRegistrationSubmit",confirmPromptUrl:"/Client/Account/LoginOverlayConfirmPrompt",confirmEmailSubmitUrl:"/Client/Account/LoginOverlayConfirmEmailSubmit",callback:null,cancelCallback:null,closeOnLogin:null,loginSource:null,init:{module:function(n,t,i,r){var u=null;typeof goodPage!="undefined"&&(u=goodPage.buyNowPrice);common.login.overlay.loginSource=n;common.login.overlay.closeOnLogin=t;common.login.overlay.callback=i;common.login.overlay.cancelCallback=r;common.overlay.getOverlayElement()!=null&&common.overlay.closeForce();try{common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Login","Start",common.login.overlay.loginSource,common.login.overlay.emailPromptUrl)}catch(f){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Login","Start",common.login.overlay.loginSource,common.login.overlay.emailPromptUrl)}common.overlay.openModal(common.login.overlay.emailPromptUrl,common.login.overlay.eventHandlers.popupOpen)},module2:function(n,t,i,r){var u=null;typeof goodPage!="undefined"&&(u=goodPage.buyNowPrice);common.login.overlay.loginSource=n;common.login.overlay.closeOnLogin=t;common.login.overlay.callback=i;common.login.overlay.cancelCallback=r;$.ajax({type:"GET",url:common.login.overlay.emailPromptUrl,traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Login","Start",common.login.overlay.loginSource,common.login.overlay.emailPromptUrl):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Login","Start",common.login.overlay.loginSource,common.login.overlay.emailPromptUrl);common.overlay.openModalContent(n);common.login.overlay.eventHandlers.popupOpen()},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Login","Start",common.login.overlay.loginSource,common.login.overlay.emailPromptUrl)}})},confirmModule:function(n,t,i,r){var u=null;typeof goodPage!="undefined"&&(u=goodPage.buyNowPrice);common.login.overlay.loginSource=n;common.login.overlay.closeOnLogin=t;common.login.overlay.callback=i;common.login.overlay.cancelCallback=r;common.overlay.getOverlayElement()!=null&&common.overlay.closeForce();try{common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Login","Start",common.login.overlay.loginSource,common.login.overlay.emailPromptUrl)}catch(f){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Login","Start",common.login.overlay.loginSource,common.login.overlay.emailPromptUrl)}common.overlay.openModal(common.login.overlay.confirmPromptUrl,common.login.overlay.eventHandlers.confirmOpen)},popup:function(){$(".login-overlay #loginOverlayEmailTxt").focus();$(".login-overlay #closeButton").click(common.login.overlay.eventHandlers.close);var n=$(".login-overlay form");n.length>0&&($.validator.unobtrusive.parse(n),n.data("validator").settings.submitHandler=common.login.overlay.eventHandlers.submitEmail)},passwordForm:function(){$(".login-overlay .login-overlay-password").focus();$(".login-overlay #closeButton").click(common.login.overlay.eventHandlers.close);var n=$(".login-overlay form");n.length>0&&($.validator.unobtrusive.parse(n),n.data("validator").settings.submitHandler=common.login.overlay.eventHandlers.submitPassword)},registrationForm:function(){$(".login-overlay #loginOverlayEmailTxt").focus();$(".login-overlay #closeButton").click(common.login.overlay.eventHandlers.close);$(".login-overlay .new-customers-block .button").click(common.login.overlay.eventHandlers.registerClick);var n=$(".login-overlay form");n.length>0&&($.validator.unobtrusive.parse(n),n.data("validator").settings.submitHandler=common.login.overlay.eventHandlers.submitRegistration)},registrationComplete:function(){$(".login-overlay #closeButton").click(common.login.overlay.eventHandlers.close);$(".login-overlay #ContinueButton").click(common.login.overlay.eventHandlers.loggedInContinueClicked)},confirmationForm:function(){var n=$(".login-overlay form");n.length>0&&($.validator.unobtrusive.parse(n),n.data("validator").settings.submitHandler=common.login.overlay.eventHandlers.confirmEmailSubmit);$(".login-overlay #closeButton").click(common.login.overlay.eventHandlers.close);$(".login-overlay #ContinueButton").click(common.login.overlay.eventHandlers.confirmContinueClicked)},confirmationComplete:function(){$(".login-overlay #closeButton").click(common.login.overlay.eventHandlers.close);$(".login-overlay #ContinueButton").click(common.login.overlay.eventHandlers.confirmContinueClicked)},loggedInPanel:function(){$(".login-overlay #closeButton").click(common.login.overlay.eventHandlers.close);$(".login-overlay #ContinueButton").click(common.login.overlay.eventHandlers.loggedInContinueClicked)}},eventHandlers:{ajaxUnauthorised:function(n,t,i,r,u){return n==401?(common.login.overlay.init.module(t,i,r,u),!0):n==403?(common.login.overlay.init.confirmModule(t,i,r,u),!0):!1},popupOpen:function(){common.login.overlay.init.popup()},close:function(n){n.preventDefault();common.overlay.close();common.login.overlay.cancelCallback!==null&&typeof common.login.overlay.cancelCallback=="function"&&common.login.overlay.cancelCallback()},submitEmail:function(){$("#signInButton").prop("disabled",!0);var n=common.login.overlay.helpers.compileForm();common.login.overlay.serverRequests.submitEmail(n)},submitPassword:function(){$("#signInButton").prop("disabled",!0);var n=common.login.overlay.helpers.compileForm();common.login.overlay.serverRequests.submitPassword(n)},submitRegistration:function(){$("#registrationButton").prop("disabled",!0);var n=common.login.overlay.helpers.compileForm();common.login.overlay.serverRequests.submitRegistration(n)},loggedInContinueClicked:function(n){n.preventDefault();common.login.overlay.closeOnLogin===!0&&common.overlay.close();common.login.overlay.callback!==null&&typeof common.login.overlay.callback=="function"&&common.login.overlay.callback()},confirmContinueClicked:function(n){n.preventDefault(common.login.overlay.callback);common.login.misc.refreshRoles(function(){common.login.overlay.closeOnLogin===!0&&common.overlay.close();common.login.overlay.callback!==null&&typeof common.login.overlay.callback=="function"&&common.login.overlay.callback()})},registerClick:function(){common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Registration","Start",common.login.overlay.loginSource)},confirmOpen:function(){common.login.overlay.init.confirmationForm()},confirmEmailSubmit:function(){var n=common.login.overlay.helpers.compileForm();common.login.overlay.serverRequests.submitConfirmEmail(n)}},serverRequests:{submitEmail:function(n){$.ajax({type:"POST",url:common.login.overlay.emailSubmitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Login","Submit",common.login.overlay.loginSource,common.login.overlay.emailSubmitUrl):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Login","Submit",common.login.overlay.loginSource,common.login.overlay.emailSubmitUrl);n.error?($(".login-overlay form").replaceWith(n.formContent),common.login.overlay.init.popup()):n.userExists?($(".login-overlay form").replaceWith(n.formContent),common.login.overlay.init.passwordForm()):($(".login-overlay form").replaceWith(n.formContent),common.login.overlay.init.registrationForm())},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Login","Submit",common.login.overlay.loginSource,common.login.overlay.emailSubmitUrl);alert("An error occurred. Please try again or contact Turners directly");$("#signInButton").prop("disabled",!1)}})},submitPassword:function(n){$.ajax({type:"POST",url:common.login.overlay.passwordSubmitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Login","Submit",common.login.overlay.loginSource,common.login.overlay.passwordSubmitUrl):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Login","Submit",common.login.overlay.loginSource,common.login.overlay.passwordSubmitUrl);n.error?($(".login-overlay form").replaceWith(n.formContent),common.login.overlay.init.passwordForm()):($(".login-overlay form").replaceWith(n.formContent),common.login.overlay.init.loggedInPanel(),common.serverRequests.loginAccountPanel())},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Login","Submit",common.login.overlay.loginSource,common.login.overlay.passwordSubmitUrl)}})},submitRegistration:function(n){$.ajax({type:"POST",url:common.login.overlay.registrationSubmitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Registration","Submit",common.login.overlay.loginSource,common.login.overlay.registrationSubmitUrl):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Registration","Submit",common.login.overlay.loginSource,common.login.overlay.registrationSubmitUrl);n.error?($(".login-overlay form").replaceWith(n.formContent),common.login.overlay.init.registrationForm()):($(".login-overlay form").replaceWith(n.formContent),common.login.overlay.init.registrationComplete(),common.serverRequests.loginAccountPanel())},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Registration","Submit",common.login.overlay.loginSource,common.login.overlay.registrationSubmitUrl)}})},submitConfirmEmail:function(n){$.ajax({type:"POST",url:common.login.overlay.confirmEmailSubmitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){$(".login-overlay form").replaceWith(n.formContent);n.error===!0?common.login.overlay.init.confirmationForm():common.login.overlay.init.confirmationComplete()},error:function(){}})}},helpers:{compileForm:function(){var t=$(".login-overlay form input"),n=common.functions.serializeObject(t);return n.requestPageUrl=document.URL,n}}},misc:{refreshRolesUrl:"/Client/Account/RefreshRoles",callback:null,refreshRoles:function(n){common.login.misc.callback=n;common.login.misc.serverRequests.refreshRoles()},serverRequests:{refreshRoles:function(){$.ajax({type:"GET",url:common.login.misc.refreshRolesUrl,traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?alert("An error has occurred. Please log out and log in again"):common.login.misc.callback()},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"RefreshRoles",!1,common.login.misc.callback)||alert("An error has occurred. Please log out and log in again")}})}}}};common.header={globalEventHandlersAdded:!1,$accountPanel:null,init:function(){if(!common.header.globalEventHandlersAdded){$(document).on("click",".account-panel-trigger",common.header.eventHandlers.loginClick);common.header.globalEventHandlersAdded=!0}common.header.$accountPanel=$(".account-panel");common.login.panel.init()},eventHandlers:{loginClick:function(n){var i=$(this),t,r;if(n.preventDefault(),t=null,typeof goodPage!="undefined"&&(t=goodPage.buyNowPrice),r=window.location.pathname,$("body").hasClass("open-account-panel"))common.header.helpers.closeAccountPanel();else try{$("body").addClass("open-account-panel");i.addClass("active-trigger");TweenMax.to(common.header.$accountPanel,.8,{display:"block",opacity:"1",y:"0%",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){var n=common.header.$accountPanel.find("form #email");n.focus();$(".account-panel-trigger").closest(".account-panel-trigger-container").hasClass("logged-in-state")||common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Login","Start","AccountPanel")},onerror:function(){$(".account-panel-trigger").closest(".account-panel-trigger-container").hasClass("logged-in-state")||common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Login","Start","AccountPanel")}})}catch(u){$(".account-panel-trigger").closest(".account-panel-trigger-container").hasClass("logged-in-state")||common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Login","Start","AccountPanel")}}},helpers:{closeAccountPanel:function(){$("body").removeClass("open-account-panel");$(".account-panel-trigger").removeClass("active-trigger");TweenMax.to(common.header.$accountPanel,.8,{display:"none",opacity:"0",y:"-5px",rotation:.001,ease:SlowMo.easeInOut,force3D:!0})}}};common.mainMenu={URL_SMALLSCREENMENU:"/Client/Content/SmallScreenMenu",isSmallScreenMenuLoaded:!1,isSmallScreenMenuLoading:!1,init:{module:function(){$(document).on("click",".small-screen-menu-panel-trigger",common.mainMenu.eventHandlers.SSOpenPanelClick);$(document).on("click",".close-ssm-trigger",common.mainMenu.eventHandlers.SSClosePanelClick);$(document).on("click",".position-back-trigger",common.mainMenu.eventHandlers.SSBackClick);$(document).on("click",".small-screen-menu-panel nav > ul > .parent > a",common.mainMenu.eventHandlers.SSMenuFirstLevel);$(document).on("click",".small-screen-menu-panel .accordion-title",common.mainMenu.eventHandlers.SSMenuAccordion);$(document).on("click",".large-screen-main-menu .sub-menu-trigger",common.mainMenu.eventHandlers.LSOpenSubMenu)},smallScreenMenu:function(){}},eventHandlers:{SSOpenPanelClick:function(n){n.preventDefault();common.mainMenu.helpers.SSOpenPanel()},SSClosePanelClick:function(n){n.preventDefault();$("body").removeClass("open-ssm-panel");TweenMax.to($(".small-screen-menu-panel"),.8,{display:"",opacity:"0",x:"100%",rotation:.001,ease:SlowMo.easeInOut,force3D:!0})},SSBackClick:function(){$(".small-screen-menu-panel li").removeClass("open-leveltwo-section");$(".small-screen-menu-panel").removeClass("leveltwo-expanded")},SSMenuFirstLevel:function(n){n.preventDefault();var t=$(this);if(t.attr("href")!="#")return window.location.href=t.attr("href"),!1;$(".small-screen-menu-panel li").removeClass("open-leveltwo-section");t.parent("li").addClass("open-leveltwo-section");$(".small-screen-menu-panel").addClass("leveltwo-expanded")},SSMenuOpenDivision:function(n){n.preventDefault();var t=$(this);common.mainMenu.helpers.SSOpenPanel(function(){common.mainMenu.helpers.SSPostOpenDivision(t)})},SSMenuAccordion:function(n){n.preventDefault();$(this).parents(".accordion-item").hasClass("expand-accordion-item")?$(this).parents(".accordion-item").removeClass("expand-accordion-item"):($(this).parents(".menu-accordion").find(".accordion-item").removeClass("expand-accordion-item"),$(this).parents(".accordion-item").addClass("expand-accordion-item"))},LSOpenSubMenu:function(n){var r,u;n.preventDefault();var f=$(this),t=f.parent(li),i=t.find(".sub-menu");t.hasClass("open-sub-menu")?common.mainMenu.helpers.LSCloseAllSubMenus():(common.mainMenu.helpers.LSCloseAllSubMenus(),t.addClass("open-sub-menu"),r=i.height(),u=$(window).height()-$("header").height(),r>u?TweenMax.to(i,.4,{display:"block",opacity:"1",rotation:.001,ease:SlowMo.easeInOut,height:"calc(100vh - 240px)",overflow:"auto"}):TweenMax.to(i,.4,{display:"block",opacity:"1",rotation:.001,ease:SlowMo.easeInOut}))}},serverRequests:{loadSSMenu:function(n){var t={pageId:common.pageId};$.ajax({type:"GET",url:common.mainMenu.URL_SMALLSCREENMENU,data:t,traditional:!0,cache:!1,timeout:3e4,success:function(t){$(t).insertBefore($("header"));common.mainMenu.isSmallScreenMenuLoading=!1;common.mainMenu.isSmallScreenMenuLoaded=!0;n!==null&&typeof n=="function"&&n();$("body").toggleClass("open-ssm-panel");TweenMax.to($(".small-screen-menu-panel"),.8,{display:"block",opacity:"1",x:"0%",rotation:.001,ease:SlowMo.easeInOut,force3D:!0})},error:function(){common.mainMenu.isSmallScreenMenuLoading=!1}})}},helpers:{LSCloseAllSubMenus:function(){$(".large-screen-main-menu li").removeClass("open-sub-menu");TweenMax.to($(".large-screen-main-menu .sub-menu"),.4,{display:"none",opacity:"0",rotation:.001,ease:SlowMo.easeInOut})},SSOpenPanel:function(n){var t=!0;common.mainMenu.isSmallScreenMenuLoaded?($("body").toggleClass("open-ssm-panel"),TweenMax.to($(".small-screen-menu-panel"),.8,{display:"block",opacity:"1",x:"0%",rotation:.001,ease:SlowMo.easeInOut,force3D:!0})):common.mainMenu.isSmallScreenMenuLoading||(common.mainMenu.isSmallScreenMenuLoading=!0,common.mainMenu.serverRequests.loadSSMenu(n),t=!1);t&&n!==null&&typeof n=="function"&&n()},SSPostOpenDivision:function(n){var i=n.data("category"),t,r;if(i!=="auction"&&i!=="mobilebtn")t=$(".small-screen-menu-panel li[data-category="+i+"]"),$(".small-screen-menu-panel li").removeClass("open-leveltwo-section"),t.addClass("open-leveltwo-section"),$(".small-screen-menu-panel").addClass("leveltwo-expanded");else{var u=n.data("division"),t=$(".small-screen-menu-panel li[data-category="+u+"]"),f=t.find(".accordion-item");$(".small-screen-menu-panel li").removeClass("open-leveltwo-section");t.addClass("open-leveltwo-section");$(".small-screen-menu-panel").addClass("leveltwo-expanded");$(".accordion-item").removeClass("expand-accordion-item");i==="auction"?t.find(".auction-home").closest(".accordion-item").addClass("expand-accordion-item"):(r=n.data("href"),$.each(f,function(){$(this).find('[data-href="'+r+'"]').length>0&&$(this).addClass("expand-accordion-item")}))}}}};searchPanel={urlGetPanel:"/Client/{0}/SearchPanel",urlSubmit:"/Client/{0}/SearchSubmit",urlStaticFilter:"/Client/{0}/SearchFilterStatic",urlDynamicFilter:"/Client/{0}/SearchFilterDynamic",classSelectorDivision:".search-panel .div-{0}",classSelectorDivisionSearch:".search-section .div-{0}",animationDuration:.4,urlCatalogueGetPanel:"/Client/Catalogue/SearchPanel{0}",urlCatalogueSubmit:"/Client/Catalogue/SearchSubmit{0}",urlCatalogueDynamicFilter:"/Client/Catalogue/SearchFilterDynamic{0}",loadedPanels:{},panelIsAnimating:!1,panelIsPinned:!1,panelPinnedFuncEnabled:!1,panelToShow:null,currentPageIsCatalogue:!1,searchForText:null,$body:null,$container:null,$submitButton:null,$searchDivision:null,$searchLoaderContainer:null,$searchError:null,$resultsText:null,init:{module:function(){searchPanel.$body=$("body");searchPanel.$container=$(".search-panel");searchPanel.$submitButton=searchPanel.$container.find("#searchSubmit");searchPanel.$searchDivision=$(".search-division");searchPanel.$searchLoaderContainer=$(".search-section .make-me-scrollable");searchPanel.$searchError=$(".search-section .error-search");searchPanel.$resultsText=$(".search-panel .results-text");var n=$(".search-panel-trigger").is(":disabled");n&&$(".search-panel-trigger").removeAttr("disabled");$(document).on("click",".search-panel-trigger",searchPanel.eventHandlers.openClick);$(".close-searchpanel-trigger").click(searchPanel.eventHandlers.closeClick);searchPanel.$searchDivision.change(searchPanel.eventHandlers.divisionChange);searchPanel.$container.children("form").submit(searchPanel.eventHandlers.submitClick);searchPanel.$container.find(".save-search-trigger").click(searchPanel.eventHandlers.saveSearchClick);searchPanel.$container.find(".reset-search-trigger").click(searchPanel.eventHandlers.ResetSearchClick);$(".close-accordion-trigger").click(searchPanel.helpers.closeAccordions)},singlePanel:function(n){var t=common.functions.stringFormat(searchPanel.classSelectorDivision,n);common.functions.initForm(t,!0);$(t+" .filter-dynamic").change(searchPanel.eventHandlers.filterDynamic);$(t+" .filter-static").change(searchPanel.eventHandlers.filterStatic);$(t+" .accordion-module .accordion-title").click(searchPanel.eventHandlers.accordionClick);searchPanel.$container.find(".list-of-colours li").click(searchPanel.eventHandlers.colorClick)},pinnedSearchPanel:function(n){enquire.register("screen and (min-width: 1024px)",{setup:function(){searchPanel.panelPinnedFuncEnabled=!0;searchPanel.$body.addClass("pinned-search-panel");searchPanel.helpers.pinPanelOnPageLoad(n);localStorage.getItem("userPinnedPanelState")===null&&localStorage.setItem("userPinnedPanelState","true");$(document).click(function(n){$(n.target).closest(".expand-accordion-item").length===0&&searchPanel.helpers.closeAccordions();$(n.target).closest(".close-accordion-trigger").length===1&&searchPanel.helpers.closeAccordions()})},match:function(){searchPanel.helpers.openTriggerAssignHandlers($(".change-search-trigger"));searchPanel.panelPinnedFuncEnabled===!0&&(searchPanel.$body.hasClass("pin-search-panel-functionality-enabled")||searchPanel.$body.addClass("pin-search-panel-functionality-enabled"),searchPanel.helpers.close(),localStorage.getItem("userPinnedPanelState")==="true"&&searchPanel.helpers.pinPanel())},unmatch:function(){$(".change-search-trigger").unbind("click");$(".change-search-trigger").click(searchPanel.eventHandlers.openClick);searchPanel.panelPinnedFuncEnabled===!0&&(searchPanel.helpers.closePinnedPanel(),searchPanel.helpers.close())},deferSetup:!0}).register("screen and (min-width: 1440px)",{match:function(){$("body").hasClass("pin-search-panel-functionality-enabled")&&(localStorage.setItem("userPinnedPanelState","true"),searchPanel.panelIsPinned=!0,searchPanel.panelPinnedFuncEnabled=!0,$("body").hasClass("pinned-search-panel-closed")?TweenMax.to($(".body-content-area"),.4,{opacity:"0",ease:SlowMo.easeInOut,onComplete:searchPanel.helpers.openPinnedPanelOnAnimationComplete}):$("body").hasClass("pinned-search-panel")||searchPanel.helpers.pinPanel())},deferSetup:!0})}},eventHandlers:{divisionChange:function(){var n=$(this).val();n=="thiscatalogue"?$(".save-search-trigger").prop("disabled",!0):$(".save-search-trigger").prop("disabled",!1);searchPanel.helpers.changePanel(n)},submitClick:function(n){n.preventDefault();var t=searchPanel.$searchDivision.val(),i=searchPanel.helpers.compileSearchFilters(t),r=common.division.getCurrentName();typeof searchPage!="undefined"&&t.toUpperCase()===r.toUpperCase()?searchPage.helpers.performSearchSubmit(i):typeof catalogueItemPage!="undefined"&&searchPanel.currentPageIsCatalogue&&t==="thiscatalogue"?catalogueItemPage.helpers.performSearchSubmit(i):searchPanel.serverRequests.submitSearch(t,i,!1)},openClick:function(n){n.preventDefault();$(this).addClass("active-search-panel-trigger");searchPanel.helpers.open()},closeClick:function(){$(".active-search-panel-trigger").removeClass("active-search-panel-trigger");searchPanel.helpers.close(!1)},filterDynamic:function(){var t=searchPanel.$searchDivision.val(),n=searchPanel.helpers.compileSearchFilters(t);this.id=="make"&&(n.models=null);this.id=="category"&&(n.subcategories=null);searchPanel.serverRequests.dynamicFilter(t,n)},filterStatic:function(){var n=searchPanel.$searchDivision.val(),t=searchPanel.helpers.compileSearchFilters(n);searchPanel.serverRequests.staticFilter(n,t)},accordionClick:function(){var n=$(this),t=$(".div-section.active-section")[0].scrollHeight-$(".div-section.active-section").scrollTop();n.parents(".accordion-item").hasClass("expand-accordion-item")?($("body").removeClass("accordion-open"),n.parents(".accordion-item").removeClass("expand-accordion-item")):(n.parents(".accordion-module").find(".accordion-item").removeClass("expand-accordion-item"),n.parents(".accordion-item").addClass("expand-accordion-item"),$("body").addClass("accordion-open"));n.parents(".accordion-item").find("img.lazy").lazyload({threshold:300,placeholder:""})},saveSearchClick:function(n){n.preventDefault();var t=searchPanel.$searchDivision.val(),i=searchPanel.helpers.compileSearchFilters(t);common.savedSearch.helpers.openForm(t,i)},ResetSearchClick:function(n){var t,i;n.preventDefault();t=searchPanel.helpers.compileSearchFilters(r);for(i in t)t.hasOwnProperty(i)&&i!="sortorder"&&i!="pagesize"&&(t[i]=null);var r=searchPanel.$searchDivision.val(),u=common.functions.stringFormat(searchPanel.classSelectorDivision,r)+" fieldset",f=$(u+" select,"+u+" input");searchPanel.serverRequests.dynamicFilter(r,t);$.each(f,function(){switch(this.type){case"select-multiple":case"select-one":this.sumo.unSelectAll();this.sumo.reload();break;case"checkbox":var n=$(this).parent().parent();searchPanel.helpers.setColorSelection(!1,n);break;case"text":this.value=""}})},colorClick:function(n){return n.stopPropagation(),searchPanel.helpers.toggleColorSelection(this),!1},togglePinnedSearchPanel:function(n){n.preventDefault();$(this).addClass("active-search-panel-trigger");searchPanel.helpers.togglePinnedSearchPanel($(this))}},serverRequests:{submitSearch:function(n,t,i){var r=null,u;r=searchPanel.currentPageIsCatalogue&&n=="thiscatalogue"?common.functions.stringFormat(searchPanel.urlCatalogueSubmit,"Car"):common.functions.stringFormat(searchPanel.urlSubmit,n);u={pageId:common.pageId,filters:t};$.ajax({type:"POST",url:r,data:JSON.stringify(u),contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(u){u.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Search","Red Search","",r):u.isRedirect?(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Search","Red Search","",r),window.location=u.redirectUrl):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Search","Red Search","",r),searchPanel.currentPageIsCatalogue==!0&&n=="thiscatalogue"?catalogueItemPage.helpers.postSubmitSearch(u,t,i):searchPage.helpers.postSubmitSearch(u,t,i))},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Search","Red Search","",r)}})},loadPanel:function(n){var i,t;i=searchPanel.currentPageIsCatalogue&&n=="thiscatalogue"?common.functions.stringFormat(searchPanel.urlCatalogueGetPanel,"Car"):common.functions.stringFormat(searchPanel.urlGetPanel,n);t={pageId:common.pageId};typeof searchPage!="undefined"?t.filters=searchPage.searchFilters:typeof catalogueItemPage!="undefined"&&searchPanel.currentPageIsCatalogue&&(t.filters=catalogueItemPage.searchFilters);$.ajax({type:"POST",url:i,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(t){t.error?common.loadStructure.fadeInSearchPanel(searchPanel.$searchLoaderContainer,searchPanel.$searchError,searchPanel.animationDuration):searchPanel.helpers.postLoadPanel(n,t)},error:function(){common.loadStructure.fadeInSearchPanel(searchPanel.$searchLoaderContainer,searchPanel.$searchError,searchPanel.animationDuration)}})},dynamicFilter:function(n,t){var r={filters:t},i;searchPanel.searchForText=t.searchfor;searchPanel.currentPageIsCatalogue==!0&&n=="thiscatalogue"?(i=common.functions.stringFormat(searchPanel.urlCatalogueDynamicFilter,"Car"),r.pageId=common.pageId):i=common.functions.stringFormat(searchPanel.urlDynamicFilter,n);$.ajax({type:"POST",url:i,data:JSON.stringify(r),contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(t){t.error?searchPanel.$resultsText.html(t.errorMessage):searchPanel.helpers.postDynamicFilter(n,t,searchPanel.searchForText)},error:function(){searchPanel.$resultsText.html("Error performing search")}})},staticFilter:function(n,t){var i=common.functions.stringFormat(searchPanel.urlStaticFilter,n),r={filters:t};$.ajax({type:"POST",url:i,data:JSON.stringify(r),contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(t){t.error?searchPanel.$resultsText.html(t.errorMessage):searchPanel.helpers.setSearchResultText(n,t.numResults)},error:function(){searchPanel.$resultsText.html("Error performing search")}})}},helpers:{postLoadPanel:function(n,t){$(t.searchContent).insertBefore(searchPanel.$searchLoaderContainer.find(".search-results-block"));searchPanel.init.singlePanel(n);searchPanel.loadedPanels[n]=!0;searchPanel.helpers.setSearchResultText(n,t.numResults);searchPanel.panelToShow=n;searchPanel.helpers.showPanel()},postDynamicFilter:function(n,t,i){searchPanel.helpers.setSearchResultText(n,t.numResults);var r=common.functions.stringFormat(searchPanel.classSelectorDivision,n);$("input[name='searchfor']").val(i);searchPanel.helpers.updateList(r+" select[name='locations']",t.filters.Locations);switch(n){case common.division.cars:case"thiscatalogue":searchPanel.helpers.updateList(r+" select[name='types']",t.filters.Types);searchPanel.helpers.updateList(r+" select[name='make']",t.filters.Makes);searchPanel.helpers.updateList(r+" select[name='models']",t.filters.Models);searchPanel.helpers.updateList(r+" select[name='pricefrom']",t.filters.PricesFrom);searchPanel.helpers.updateList(r+" select[name='priceto']",t.filters.PricesTo);searchPanel.helpers.updateList(r+" select[name='odofrom']",t.filters.OdometersFrom);searchPanel.helpers.updateList(r+" select[name='odoto']",t.filters.OdometersTo);searchPanel.helpers.updateList(r+" select[name='yearfrom']",t.filters.YearsFrom);searchPanel.helpers.updateList(r+" select[name='yearto']",t.filters.YearsTo);searchPanel.helpers.updateList(r+" select[name='salemethods']",t.filters.SaleMethods);break;case common.division.trucksAndMachinery:searchPanel.helpers.updateList(r+" select[name='industry']",t.filters.Industrys);searchPanel.helpers.updateList(r+" select[name='category']",t.filters.Categorys);searchPanel.helpers.updateList(r+" select[name='subcategories']",t.filters.SubCategorys);searchPanel.helpers.updateList(r+" select[name='make']",t.filters.Makes);searchPanel.helpers.updateList(r+" select[name='models']",t.filters.Models);searchPanel.helpers.updateList(r+" select[name='yearfrom']",t.filters.YearsFrom);searchPanel.helpers.updateList(r+" select[name='yearto']",t.filters.YearsTo);searchPanel.helpers.updateList(r+" select[name='salemethods']",t.filters.SaleMethods);searchPanel.helpers.updateList(r+" select[name='pricefrom']",t.filters.PricesFrom);searchPanel.helpers.updateList(r+" select[name='priceto']",t.filters.PricesTo);break;case common.division.damagedAndEndOfLife:searchPanel.helpers.updateList(r+" select[name='types']",t.filters.Types);searchPanel.helpers.updateList(r+" select[name='make']",t.filters.Makes);searchPanel.helpers.updateList(r+" select[name='models']",t.filters.Models);searchPanel.helpers.updateList(r+" select[name='pricefrom']",t.filters.PricesFrom);searchPanel.helpers.updateList(r+" select[name='priceto']",t.filters.PricesTo);searchPanel.helpers.updateList(r+" select[name='yearfrom']",t.filters.YearsFrom);searchPanel.helpers.updateList(r+" select[name='yearto']",t.filters.YearsTo);searchPanel.helpers.updateList(r+" select[name='regstatus']",t.filters.RegStatus);break;case common.division.boatsAndMarine:searchPanel.helpers.updateList(r+" select[name='category']",t.filters.Categorys);searchPanel.helpers.updateList(r+" select[name='salemethods']",t.filters.SaleMethods);break;case common.division.motorcyclesAndScooter:searchPanel.helpers.updateList(r+" select[name='bodystyles']",t.filters.BodyStyles);searchPanel.helpers.updateList(r+" select[name='make']",t.filters.Makes);searchPanel.helpers.updateList(r+" select[name='models']",t.filters.Models);searchPanel.helpers.updateList(r+" select[name='yearfrom']",t.filters.YearsFrom);searchPanel.helpers.updateList(r+" select[name='yearto']",t.filters.YearsTo);searchPanel.helpers.updateList(r+" select[name='salemethods']",t.filters.SaleMethods);searchPanel.helpers.updateList(r+" select[name='odofrom']",t.filters.OdometersFrom);searchPanel.helpers.updateList(r+" select[name='odoto']",t.filters.OdometersTo);searchPanel.helpers.updateList(r+" select[name='enginefrom']",t.filters.EngineFrom);searchPanel.helpers.updateList(r+" select[name='engineto']",t.filters.EngineTo);searchPanel.helpers.updateList(r+" select[name='regstatus']",t.filters.RegStatus);break;case common.division.generalGoods:searchPanel.helpers.updateList(r+" select[name='category']",t.filters.Categorys);searchPanel.helpers.updateList(r+" select[name='subcategories']",t.filters.SubCategorys);searchPanel.helpers.updateList(r+" select[name='salemethods']",t.filters.SaleMethods);break;case common.division.caravansAndMotorhomes:searchPanel.helpers.updateList(r+" select[name='category']",t.filters.Categorys);searchPanel.helpers.updateList(r+" select[name='salemethods']",t.filters.SaleMethods)}},updateList:function(n,t){var r=$(n),u;r.length>0&&(r[0].sumo.is_opened||(r.html(""),u=[],$.each(t,function(n,t){var e=t.GroupName!=null,r,f;if(e){for(r=null,i=0;i<u.length;i++)if(f=u[i],f.isGroup==!0&&f.GroupName==t.GroupName){r=f;break}r==null&&(r={isGroup:!0,GroupName:t.GroupName,options:[]},u.push(r));r.options.push(t)}else u.push(t)}),$.each(u,function(n,t){var i,u;t.isGroup==!0?(i=$('<optgroup label="'+t.GroupName+'"><\/optgroup>'),$.each(t.options,function(n,t){var r=t.Selected?'selected="selected"':"";i.append('<option value="'+t.Value+'" '+r+">"+t.Text+"<\/option>")}),r.append(i)):(u=t.Selected?'selected="selected"':"",r.append('<option value="'+t.Value+'" '+u+">"+t.Text+"<\/option>"))}),r[0].sumo.reload()))},hidePanel:function(){searchPanel.panelIsAnimating=!0;common.loadStructure.fadeOutSearchPanel(searchPanel.$searchLoaderContainer,$(".search-section .div-section"),searchPanel.animationDuration,function(){searchPanel.panelIsAnimating=!1;searchPanel.helpers.showPanel()});$(".search-panel .div-section").removeClass("active-section")},hidePanelNoLoading:function(){searchPanel.panelIsAnimating=!0;common.loadStructure.fadeOutSearchPanelNoLoading($(".search-section .div-section"),searchPanel.animationDuration,function(){searchPanel.panelIsAnimating=!1;searchPanel.helpers.showPanel()});$(".search-panel .div-section").removeClass("active-section")},showPanel:function(){if(searchPanel.panelIsAnimating==!1&&searchPanel.panelToShow!=null){var n=common.functions.stringFormat(searchPanel.classSelectorDivisionSearch,searchPanel.panelToShow);common.loadStructure.fadeInSearchPanel(searchPanel.$searchLoaderContainer,$(n),searchPanel.animationDuration,$(".search-results-block").css("opacity","1"));$(n).addClass("active-section");searchPanel.helpers.restoreSearchResultText(searchPanel.panelToShow);searchPanel.panelToShow=null}},changePanel:function(n){searchPanel.$searchDivision.val(n);searchPanel.$searchDivision[0].sumo.reload();var t=common.functions.stringFormat(searchPanel.classSelectorDivision,n),i=$(t);i.length>0?(searchPanel.helpers.hidePanelNoLoading(),searchPanel.panelToShow=n,searchPanel.helpers.showPanel()):(searchPanel.helpers.hidePanel(),searchPanel.serverRequests.loadPanel(n))},unloadPanel:function(){var n=common.division.getCurrentName(),t=common.functions.stringFormat(searchPanel.classSelectorDivision,n);$(t).remove();searchPanel.loadedPanels[n]=!1},toggle:function(){searchPanel.$body.hasClass("open-search-panel")?searchPanel.helpers.close(!1):searchPanel.helpers.open()},openDivision:function(n){searchPanel.$searchDivision.val()!==n?searchPanel.$body.hasClass("open-search-panel")?searchPanel.helpers.changePanel(n):(searchPanel.$searchDivision.val(n),searchPanel.$searchDivision[0].sumo.reload(),searchPanel.helpers.open()):searchPanel.helpers.open()},open:function(){searchPanel.$body.hasClass("open-search-panel")||(searchPanel.$body.addClass("open-search-panel"),searchPanel.$body.removeClass("pinned-search-panel"),searchPanel.$body.removeClass("pinned-search-panel-closed"),searchPanel.$body.removeClass("pin-search-panel-functionality-enabled"),TweenMax.to(searchPanel.$container,.8,{display:"block",opacity:"1",x:"0%",rotation:.001,ease:SlowMo.easeInOut,onComplete:searchPanel.helpers.openOnAnimationComplete}))},openOnAnimationComplete:function(){var n=searchPanel.$searchDivision.val();searchPanel.loadedPanels[n]?(searchPanel.panelToShow=n,searchPanel.helpers.showPanel()):(searchPanel.helpers.hidePanel(),searchPanel.serverRequests.loadPanel(n))},close:function(n){searchPanel.$body.hasClass("open-search-panel")?(searchPanel.panelPinnedFuncEnabled==!0&&(searchPanel.$body.removeClass("pinned-search-panel"),searchPanel.$body.removeClass("pinned-search-panel-closed"),searchPanel.$body.removeClass("pin-search-panel-functionality-enabled")),TweenMax.to(searchPanel.$container,.8,{display:"none",opacity:"0",x:"-100%",rotation:.001,ease:SlowMo.easeInOut,onComplete:searchPanel.helpers.closeOnAnimationComplete(n)})):n&&searchPanel.helpers.unloadPanel()},closeOnAnimationComplete:function(n){searchPanel.$container.css("transform","none");searchPanel.$container.css("top","0px");searchPanel.$body.removeClass("open-search-panel");$(".search-panel-trigger").removeAttr("disabled");$(".change-search-trigger").removeAttr("disabled");n&&searchPanel.helpers.unloadPanel()},compileSearchFilters:function(n){var t=common.functions.stringFormat(searchPanel.classSelectorDivision,n),i=$(t+" input, "+t+" select");return common.functions.serializeObject(i)},toggleColorSelection:function(n){var t=$(n).find("input").is(":checked");return searchPanel.helpers.setColorSelection(!t,n),!1},setColorSelection:function(n,t){!n==!0?$(t).removeClass("active-colour"):$(t).addClass("active-colour");$(t).find("input").prop("checked",n)},setDivsionResultsAttrVal:function(n,t){var i=searchPanel.helpers.getDivisionSelectorString(n);$(i).data("resultstext",t)},getDivsionResultsAttrVal:function(n){var t=searchPanel.helpers.getDivisionSelectorString(n);return $(t).data("resultstext")},getDivisionSelectorString:function(n){return common.functions.stringFormat(searchPanel.classSelectorDivision,n)},setSearchResultText:function(n,t){searchPanel.helpers.setDivsionResultsAttrVal(n,t);searchPanel.$resultsText.html("Your search will return <span>"+t+"<\/span> results")},restoreSearchResultText:function(n){var t=searchPanel.helpers.getDivsionResultsAttrVal(n),i;t==""?(i=searchPanel.$searchDivision.first().find(":selected").text(),searchPanel.$resultsText.html("Search for all <span>"+i+"<\/span>")):searchPanel.helpers.setSearchResultText(n,t);n==common.division.cars?searchPanel.$submitButton.text("Find a Car"):searchPanel.$submitButton.text("Search")},pinPanelOnPageLoad:function(){if(!searchPanel.panelIsPinned==!0){var n=searchPanel.$searchDivision.val();searchPanel.currentPageIsCatalogue==!0&&(n="thiscatalogue");$(".search-panel").insertBefore(".main");searchPanel.loadedPanels[n]?(searchPanel.panelToShow=n,searchPanel.helpers.showPanel()):(searchPanel.helpers.hidePanel(),searchPanel.serverRequests.loadPanel(n));localStorage.getItem("userPinnedPanelState")==="true"&&(searchPanel.panelIsPinned=!0,TweenMax.to(searchPanel.$container,.8,{display:"block",opacity:"1",ease:SlowMo.easeInOut,onComplete:searchPanel.helpers.openPinnedPanelOnAnimationComplete}))}},pinPanel:function(){searchPanel.$body.hasClass("open-search-panel")&&searchPanel.$body.removeClass("open-search-panel");localStorage.getItem("userPinnedPanelState")==="true"?(!searchPanel.panelIsPinned==!0&&(searchPanel.panelIsPinned=!0),TweenMax.to($(".body-content-area"),.4,{opacity:"0",ease:SlowMo.easeInOut,onComplete:searchPanel.helpers.openPinnedPanelOnAnimationComplete})):(TweenMax.to($(".body-content-area"),.4,{opacity:"1",ease:SlowMo.easeInOut}),searchPanel.$body.addClass("pinned-search-panel-closed"))},openPinnedPanelOnAnimationComplete:function(){searchPanel.$container.css("transform","none");TweenMax.to($(".body-content-area"),.4,{opacity:"1",ease:SlowMo.easeInOut,onComplete:function(){common.productGrid.helpers.updateGalleries()}});TweenMax.to(searchPanel.$container,.4,{display:"block",opacity:"1",left:"0px",ease:SlowMo.easeInOut});searchPanel.$body.addClass("pinned-search-panel");searchPanel.$body.removeClass("pinned-search-panel-closed")},closePinnedPanel:function(){searchPanel.panelIsPinned==!0&&(TweenMax.to(searchPanel.$container,.4,{zIndex:99999999,display:"none",opacity:"0",ease:SlowMo.easeInOut,onComplete:searchPanel.helpers.closePinnedPanelOnAnimationComplete}),TweenMax.to($(".body-content-area"),.4,{opacity:"0",ease:SlowMo.easeInOut}))},closePinnedPanelOnAnimationComplete:function(){searchPanel.$container.css("transform","none");searchPanel.$container.css("z-index","99999999");TweenMax.to($(".body-content-area"),.4,{opacity:"1",ease:SlowMo.easeInOut,onComplete:function(){common.productGrid.helpers.updateGalleries()}});searchPanel.panelIsPinned=!1;searchPanel.$body.removeClass("pinned-search-panel");searchPanel.$body.addClass("pinned-search-panel-closed")},togglePinnedSearchPanel:function(){searchPanel.panelIsPinned==!0?(searchPanel.helpers.closePinnedPanel(),localStorage.setItem("userPinnedPanelState","false"),$(".active-search-panel-trigger").removeClass("active-search-panel-trigger")):(localStorage.setItem("userPinnedPanelState","true"),searchPanel.helpers.pinPanel())},closeAccordions:function(){$("body").removeClass("accordion-open");$(".accordion-item").removeClass("expand-accordion-item")},openTriggerAssignHandlers:function(n){var t=n;searchPanel.panelPinnedFuncEnabled==!0?(t.unbind("click"),t.click(searchPanel.eventHandlers.togglePinnedSearchPanel)):(t.unbind("click"),t.click(searchPanel.eventHandlers.openClick))}}};common.analytics={getIdentifyLoggedInUserUrl:"/Client/Analytics/IdentifyLoggedInUser",getIdentifyRegisteredUserUrl:"/Client/Analytics/IdentifyRegisteredUser",userIsLoggedIn:!1,init:function(){typeof analytics!="undefined"&&analytics.ready(function(){$(document).on("change",".analytics-id-trig",common.analytics.eventHandlers.identifyingFormChanged);common.analytics.serverRequests.getIdentifyLoggedInUser()})},eventHandlers:{identifyingFormChanged:function(n){var r;if(n.preventDefault(),r=$(this),!common.analytics.userIsLoggedIn&&r.valid()==!0){var i=r.closest("form"),u=i.find(".analytics-id-na").val(),f=i.find(".analytics-id-fn").val(),e=i.find(".analytics-id-ln").val(),o=i.find(".analytics-id-ph").val(),s=i.find(".analytics-id-em").val(),t={};u&&(t.name=u);f&&(t.firstName=f);e&&(t.lastName=e);o&&(t.phone=o);s&&(t.email=s);common.analytics.segmentRequests.identifyAnonymousUser(t)}}},serverRequests:{getIdentifyLoggedInUser:function(){var n={pageId:common.pageId};$.ajax({type:"GET",url:common.analytics.getIdentifyLoggedInUserUrl,data:n,traditional:!0,cache:!1,timeout:3e4,success:function(n){var t,i;n.error||(common.analytics.userIsLoggedIn=n.userIsLoggedIn,common.analytics.userIsLoggedIn&&!n.userIdentifiedDuringSession?(n.segmentIdentifyInfo.traits.daysSinceLastLogIn===null&&delete n.segmentIdentifyInfo.traits.daysSinceLastLogIn,common.analytics.segmentRequests.identifyLoggedInUser(n.segmentIdentifyInfo)):common.analytics.userIsLoggedIn||(t=analytics.user(),t&&(i=t.id(),i&&common.analytics.segmentRequests.reset())))},error:function(){}})},getIdentifyRegisteredUser:function(){var n={pageId:common.pageId};$.ajax({type:"GET",url:common.analytics.getIdentifyRegisteredUserUrl,data:n,traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error||common.analytics.segmentRequests.identifyRegisteredUser(n.segmentIdentifyInfo)},error:function(){}})}},segmentRequests:{identifyLoggedInUser:function(n){analytics.identify(n.userId,n.traits)},identifyRegisteredUser:function(n){analytics.identify(n.userId,n.traits)},identifyAnonymousUser:function(n){n&&!$.isEmptyObject(n)&&analytics.identify(n)},reset:function(){analytics.reset()}},helpers:{}};searchBox={urlSubmit:"/Client/{0}/SearchSubmit",urlDynamicFilter:"/Client/{0}/SearchFilterDynamic",animationDuration:.4,division:null,$container:null,eventFilterChanged:"searchbox:filterchanged",init:function(){searchBox.division=common.division.getCurrentName();searchBox.division==null&&(searchBox.division=common.division.cars);searchBox.$container=$(".module-search-box");searchBox.$container.find(".filter-dynamic").change(searchBox.eventHandlers.filterDynamic);searchBox.$container.find(".advanced-searchbox-fields-toggle").click(searchBox.eventHandlers.toggleMoreFilters);searchBox.$container.find("#searchSubmit").click(searchBox.eventHandlers.submitClick);$("#searchTextForm").submit(searchBox.eventHandlers.searchTextSubmit)},eventHandlers:{toggleMoreFilters:function(){var n=$(this),t=n.parents(".module-search-box").hasClass("show-all-filters")?"See more options":"Hide options";n.text(t);n.parents(".module-search-box").toggleClass("show-all-filters")},submitClick:function(n){n.preventDefault();var t=searchBox.helpers.compileSearchFilters();searchBox.serverRequests.submitSearch(t)},filterDynamic:function(){var n=$(this),t=searchBox.helpers.compileSearchFilters();this.id=="make"&&(t.models=null);n.attr("name")=="industry"&&n.is(":checked")&&(t.industry=n.val());n.attr("name")=="excavator"&&(t.category=n.is(":checked")?t.excavator:"");$(document).trigger(searchBox.eventFilterChanged,t)},searchTextSubmit:function(n){n.preventDefault();var t=searchBox.helpers.compileSearchTextFilters();searchBox.serverRequests.submitSearch(t)}},serverRequests:{submitSearch:function(n){var t=common.functions.stringFormat(searchBox.urlSubmit,searchBox.division),i={pageId:common.pageId,filters:n};$.ajax({type:"POST",url:t,data:JSON.stringify(i),contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Search","Home Search","",t):n.isRedirect&&(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Search","Home Search","",t),window.location=n.redirectUrl)},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Search","Home Search","",t)}})},dynamicFilter:function(n){var t=common.functions.stringFormat(searchBox.urlDynamicFilter,searchBox.division),i={filters:n};$.ajax({type:"POST",url:t,data:JSON.stringify(i),contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error||searchBox.helpers.postDynamicFilter(n)},error:function(){}})}},helpers:{postDynamicFilter:function(n){searchBox.helpers.updateList("select[name='locations']",n.filters.Locations);switch(searchBox.division){case common.division.cars:searchBox.helpers.updateTypes(n.filters.Types);searchBox.helpers.updateList("select[name='make']",n.filters.Makes);searchBox.helpers.updateList("select[name='models']",n.filters.Models);searchBox.helpers.updateList("select[name='pricefrom']",n.filters.PricesFrom);searchBox.helpers.updateList("select[name='priceto']",n.filters.PricesTo);searchBox.helpers.updateList("select[name='odofrom']",n.filters.OdometersFrom);searchBox.helpers.updateList("select[name='odoto']",n.filters.OdometersTo);searchBox.helpers.updateList("select[name='yearfrom']",n.filters.YearsFrom);searchBox.helpers.updateList("select[name='yearto']",n.filters.YearsTo);searchBox.helpers.updateList("select[name='salemethods']",n.filters.SaleMethods);searchBox.helpers.updateCustom(n.filters.Custom);break;case common.division.trucksAndMachinery:searchBox.helpers.updateIndustries(n.filters.Industrys);searchBox.helpers.updateExcavator(n.filters.Categorys);searchBox.helpers.updateList("select[name='category']",n.filters.Categorys);searchBox.helpers.updateList("select[name='subcategories']",n.filters.SubCategorys);searchBox.helpers.updateList("select[name='make']",n.filters.Makes);searchBox.helpers.updateList("select[name='models']",n.filters.Models);searchBox.helpers.updateList("select[name='yearfrom']",n.filters.YearsFrom);searchBox.helpers.updateList("select[name='yearto']",n.filters.YearsTo);searchBox.helpers.updateList("select[name='salemethods']",n.filters.SaleMethods);break;case common.division.damagedAndEndOfLife:searchBox.helpers.updateList("select[name='types']",n.filters.Types);searchBox.helpers.updateList("select[name='make']",n.filters.Makes);searchBox.helpers.updateList("select[name='models']",n.filters.Models);searchBox.helpers.updateList("select[name='pricefrom']",n.filters.PricesFrom);searchBox.helpers.updateList("select[name='priceto']",n.filters.PricesTo);searchBox.helpers.updateList("select[name='yearfrom']",n.filters.YearsFrom);searchBox.helpers.updateList("select[name='yearto']",n.filters.YearsTo);searchBox.helpers.updateList("select[name='regstatus']",n.filters.RegStatus);searchBox.helpers.updateCustom(n.filters.Custom);break;case common.division.boatsAndMarine:searchBox.helpers.updateList("select[name='category']",n.filters.Categorys);break;case common.division.generalGoods:searchBox.helpers.updateList("select[name='category']",n.filters.Categorys);searchBox.helpers.updateList("select[name='subcategories']",n.filters.SubCategorys);searchBox.helpers.updateList("select[name='salemethods']",n.filters.SaleMethods)}},updateTypes:function(n){var t=searchBox.$container.find("input[name='types']");t.length>0&&$.each(t,function(t,i){var r=$(i),f=r.parent(),u=!0,e=!1,o=0;$.each(n,function(n,t){if(t.Value==r.val())return u=t.Count<1,e=t.Selected,o=t.Count,!1});r.prop("disabled",u);r.prop("checked",e);r.siblings(".checkbox-wrapper").children(".number").text(common.functions.stringFormat("({0})",o));u==!0?f.addClass("disabled"):f.removeClass("disabled")})},updateIndustries:function(n){var t=searchBox.$container.find("input[name='industry']");t.length>0&&$.each(t,function(t,i){var r=$(i),f=r.parent(),u=!0,e=!1,o=0;$.each(n,function(n,t){if(t.Value==r.val())return u=t.Count<1,e=t.Selected,o=t.Count,!1});r.prop("disabled",u);r.prop("checked",e);r.siblings(".checkbox-wrapper").children(".number").text(common.functions.stringFormat("({0})",o));u==!0?f.addClass("disabled"):f.removeClass("disabled")})},updateExcavator:function(n){var t=searchBox.$container.find("input[name='excavator']");if(t.length>0){var r=t.parent(),i=!0,u=!1,f=0;$.each(n,function(n,r){if(r.Value==t.val())return i=r.Count<1,u=r.Selected,f=r.Count,!1});t.prop("disabled",i);t.prop("checked",u);t.siblings(".checkbox-wrapper").children(".number").text(common.functions.stringFormat("({0})",f));i==!0?r.addClass("disabled"):r.removeClass("disabled")}},updateList:function(n,t){var r=searchBox.$container.find(n),u;r.length>0&&(r[0].sumo.is_opened||(r.html(""),u=[],$.each(t,function(n,t){var e=t.GroupName!=null,r,f;if(e){for(r=null,i=0;i<u.length;i++)if(f=u[i],f.isGroup==!0&&f.GroupName==t.GroupName){r=f;break}r==null&&(r={isGroup:!0,GroupName:t.GroupName,options:[]},u.push(r));r.options.push(t)}else u.push(t)}),$.each(u,function(n,t){var i,u;t.isGroup==!0?(i=$('<optgroup label="'+t.GroupName+'"><\/optgroup>'),$.each(t.options,function(n,t){var r=t.Selected?'selected="selected"':"";i.append('<option value="'+t.Value+'" '+r+">"+t.Text+"<\/option>")}),r.append(i)):(u=t.Selected?'selected="selected"':"",r.append('<option value="'+t.Value+'" '+u+">"+t.Text+"<\/option>"))}),r[0].sumo.reload()))},updateCustom:function(n){var t=searchBox.$container.find("input[name='custom']");t.length>0&&$.each(t,function(t,i){var r=$(i),f=r.parent(),u=!0,e=!1,o=0;$.each(n,function(n,t){if(t.Value==r.val())return u=t.Count<1,e=t.Selected,o=t.Count,!1});r.prop("disabled",u);r.prop("checked",e);r.siblings(".checkbox-wrapper").children(".number").text(common.functions.stringFormat("({0})",o));u==!0?f.addClass("disabled"):f.removeClass("disabled")})},compileSearchFilters:function(){var n=searchBox.$container.find("input, select");return common.functions.serializeObject(n)},compileSearchTextFilters:function(){var n=$("#searchTextForm").find("input, select");return common.functions.serializeObject(n)}}};common.watchList={urlGoToWatchlistPage:"/Client/Account/WatchlistGoToPage",toggleButton:null,callBack:null,isRemoving:!1,$headerContainer:null,$detailContainer:null,$watchlistContainer:null,init:function(){common.watchList.$headerContainer=$(".page-header");common.watchList.$detailContainer=$(".product-detail");common.watchList.$watchlistContainer=$(".outer-watchlist");$(document).on("click",".watchlist-trigger",common.watchList.eventHandlers.click);$(document).on("click",".watchlist-bar",common.watchList.eventHandlers.clickBar)},eventHandlers:{click:function(n){if(n.preventDefault(),common.overlay.getOverlayElement()!=null&&$(".compare-gallery").length<1&&common.overlay.closeForce(),common.watchList.toggleButton=$(this),$(this).hasClass("active")){if(confirm("Are you sure you want to remove this item from your watchlist?")&&(common.watchList.serverRequests.toggle(),common.watchList.isRemoving=!0,$(this).closest(".watchlist-filter").length>0)){var t=$(this).closest(".product-block");t.slideUp();t.remove()}}else common.watchList.serverRequests.toggle()},clickBar:function(n){n.preventDefault();common.watchList.serverRequests.goToPage()},goToPageWithDelay:function(){setTimeout(common.watchList.serverRequests.goToPage,500)},loginCallback:function(){common.watchList.toggleButton!==null&&common.watchList.serverRequests.toggle()}},serverRequests:{toggle:function(){data={goodId:common.watchList.toggleButton.attr("data-goodid"),divisionIndex:common.watchList.toggleButton.attr("data-divisionindex"),goodNumber:common.watchList.toggleButton.attr("data-goodnumber")};var n=null;typeof goodPage!="undefined"&&(n=goodPage.buyNowPrice);$.ajax({type:"POST",url:"/Client/Account/ToggleWatch",cache:!1,data:data,timeout:3e4,success:function(n){n.error===!0?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Watchlist","Submit","","/Client/Account/ToggleWatch"),n.showErrorContent===!0?common.overlay.openContent(n.errorContent):alert(n.errorMessage)):(n.isWatching===!0?(common.watchList.toggleButton.addClass("active"),common.watchList.$detailContainer.find(".watchlist-trigger").addClass("active"),common.watchList.$headerContainer.find(".watchlist-trigger").addClass("active"),common.watchList.toggleButton.prop("title","Remove this from your watchlist"),common.watchList.$detailContainer.find(".watchlist-trigger").prop("title","Remove this from your watchlist"),common.watchList.$headerContainer.find(".watchlist-trigger").prop("title","Remove this from your watchlist"),common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Watchlist","Submit Add","","/Client/Account/ToggleWatch")):n.isWatching===!1&&(common.watchList.toggleButton.removeClass("active"),common.watchList.$detailContainer.find(".watchlist-trigger").removeClass("active"),common.watchList.$headerContainer.find(".watchlist-trigger").removeClass("active"),common.watchList.toggleButton.prop("title","Add this to your watchlist"),common.watchList.$detailContainer.find(".watchlist-trigger").prop("title","Add this to your watchlist"),common.watchList.$headerContainer.find(".watchlist-trigger").prop("title","Add this to your watchlist"),common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Watchlist","Submit Remove","","/Client/Account/ToggleWatch")),$(".watchlist-count").text(n.count),$(".watchlist-text").text(n.text),$(".account-watchlist-count").text(common.functions.stringFormat("({0})",n.count)),$(".watch-list-text").length>0&&$(".watch-list-text-count").text(n.watchlistGoodCount),n.isHideWatchlist?common.watchList.$watchlistContainer.addClass("hide-count-detail"):common.watchList.$watchlistContainer.removeClass("hide-count-detail"))},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"Watchlist",!0,common.watchList.eventHandlers.loginCallback)||(common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Watchlist","Submit","","/Client/Account/ToggleWatch"),alert("An error has occurred. Please try again or contact Turners directly"))}})},goToPage:function(){$.ajax({type:"GET",url:common.watchList.urlGoToWatchlistPage,cache:!1,timeout:3e4,success:function(n){n.error===!0?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Watchlist","View Watchlist Page Click From Toolbar","",common.watchList.urlGoToWatchlistPage),n.showErrorContent===!0?common.overlay.openContent(n.errorContent):alert(n.errorMessage)):n.isRedirect?(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Watchlist","View Watchlist Page Click From Toolbar","",common.watchList.urlGoToWatchlistPage),window.location=$(".watchlist-bar").attr("href")):(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Watchlist","View Watchlist Page Click From Toolbar","",common.watchList.urlGoToWatchlistPage),alert("An error has occurred. Please try again or contact Turners directly"))},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"Watchlist",!0,common.watchList.eventHandlers.goToPageWithDelay)||(common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Watchlist","View Watchlist Page Click From Toolbar","",common.watchList.urlGoToWatchlistPage),alert("An error has occurred. Please try again or contact Turners directly"))}})}},helpers:{}};common.compare={urlToggle:"/Client/Compare/ToggleCompare",urlGoToComparePage:"/Client/Compare/GoToComparePage",$toggleButton:null,$comparePageButton:null,callBack:null,$headerContainer:null,$detailContainer:null,$compareContainer:null,init:function(){if(typeof comparePage=="undefined"){common.compare.$headerContainer=$(".page-header");common.compare.$detailContainer=$(".product-detail");common.compare.$compareContainer=$(".outer-compare");$(document).on("click",".compare-good-trigger",common.compare.eventHandlers.click);$(document).on("click",".compare-bar",common.compare.eventHandlers.clickBar)}},eventHandlers:{click:function(n){n.preventDefault();common.compare.$toggleButton=$(this);common.overlay.getOverlayElement()!=null&&common.overlay.closeForce();common.compare.serverRequests.toggle()},clickBar:function(n){n.preventDefault();common.compare.$comparePageButton=$(this);common.compare.serverRequests.goToPage()}},serverRequests:{toggle:function(){var n=common.compare.$toggleButton.hasClass("active")?"Off ":"On ";data={divisionIndex:common.compare.$toggleButton.attr("data-divisionindex"),goodNumber:common.compare.$toggleButton.attr("data-goodnumber")};$.ajax({type:"POST",url:common.compare.urlToggle,cache:!1,data:data,timeout:3e4,success:function(t){t.error===!0?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Compare","Compare "+n,"",common.compare.urlToggle),t.showErrorContent===!0?common.overlay.openContent(t.errorContent):alert(t.errorMessage)):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Compare","Compare "+n,"",common.compare.urlToggle),t.IsComparing===!0?(common.compare.$toggleButton.addClass("active"),common.compare.$detailContainer.find(".compare-good-trigger").addClass("active"),common.compare.$headerContainer.find(".compare-good-trigger").addClass("active"),common.compare.$toggleButton.prop("title","Remove this from your compare list"),common.compare.$detailContainer.find(".compare-good-trigger").prop("title","Remove this from your compare list"),common.compare.$headerContainer.find(".compare-good-trigger").prop("title","Remove this from your compare list")):t.IsComparing===!1&&(common.compare.$toggleButton.removeClass("active"),common.compare.$detailContainer.find(".compare-good-trigger").removeClass("active"),common.compare.$headerContainer.find(".compare-good-trigger").removeClass("active"),common.compare.$toggleButton.prop("title","Add this to your compare list"),common.compare.$detailContainer.find(".compare-good-trigger").prop("title","Add this to your compare list"),common.compare.$headerContainer.find(".compare-good-trigger").prop("title","Add this to your compare list")),$(".compare-count").text(t.Count),$(".compare-text").text(t.Text),$(".account-panel-trigger-container").hasClass("logged-in-state")&&$(".compare-count-account").text(common.functions.stringFormat("({0})",t.Count)),t.IsHideCompare?common.compare.$compareContainer.addClass("hide-count-detail"):common.compare.$compareContainer.removeClass("hide-count-detail"))},error:function(t){common.login.overlay.eventHandlers.ajaxUnauthorised(t.status,"Compare",!0,common.compare.serverRequests.toggle)||(alert("An error has occurred. Please try again or contact Turners directly"),common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Compare","Compare "+n,"",common.compare.urlToggle))}})},goToPage:function(){$.ajax({type:"GET",url:common.compare.urlGoToComparePage,cache:!1,timeout:3e4,success:function(n){n.error===!0?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Compare","View Compare Page Click From Toolbar","",common.compare.urlGoToComparePage),n.showErrorContent===!0?common.overlay.openContent(n.errorContent):alert(n.errorMessage)):n.isRedirect?(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"Compare","View Compare Page Click From Toolbar","",common.compare.urlGoToComparePage),window.location=common.compare.$comparePageButton.attr("href")):(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"Compare","View Compare Page Click From Toolbar","",common.compare.urlGoToComparePage),alert("An error has occurred. Please try again or contact Turners directly"))},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"Compare",!0,common.compare.serverRequests.goToPage)||(alert("An error has occurred. Please try again or contact Turners directly"),common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"Compare","View Compare Page Click From Toolbar","",common.compare.urlGoToComparePage))}})}},helpers:{}};common.enquiryPanel={submitUrl:"/Client/Content/EnquiryPanelGeneralSubmit",$form:null,init:function(){common.enquiryPanel.$form=$("form.enquiry-panel-general");common.enquiryPanel.$form.length>0&&($.validator.unobtrusive.parse(common.enquiryPanel.$form),common.enquiryPanel.$form.data("validator").settings.submitHandler=common.enquiryPanel.eventHandlers.submitForm)},eventHandlers:{submitForm:function(){var n=common.enquiryPanel.helpers.compileForm();common.enquiryPanel.serverRequests.submitEnquiry(n)}},serverRequests:{submitEnquiry:function(n){$.ajax({type:"POST",url:common.enquiryPanel.submitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?(common.enquiryPanel.$form.replaceWith(n.formContent),common.enquiryPanel.init()):common.enquiryPanel.$form.replaceWith(n.successContent)},error:function(){alert("Your enquiry could not be processed. Please contact Turners directly.")}})}},helpers:{compileForm:function(){var n=common.enquiryPanel.$form.find("input");return common.functions.serializeObject(n)}}};common.enquiryFinancePanel={submitUrl:"/Client/Finance/EnquiryPanelFinanceSubmit",$form:null,init:function(){common.enquiryFinancePanel.$form=$("form.enquiry-panel-finance");common.enquiryFinancePanel.$form.length>0&&($.validator.unobtrusive.parse(common.enquiryFinancePanel.$form),common.enquiryFinancePanel.$form.data("validator").settings.submitHandler=common.enquiryFinancePanel.eventHandlers.submitForm)},eventHandlers:{submitForm:function(){var n=common.enquiryFinancePanel.helpers.compileForm();common.enquiryFinancePanel.serverRequests.submitEnquiry(n)}},serverRequests:{submitEnquiry:function(n){$.ajax({type:"POST",url:common.enquiryFinancePanel.submitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?(common.enquiryFinancePanel.$form.replaceWith(n.formContent),common.enquiryFinancePanel.init()):n.isRedirect===!0?window.location=n.redirectUrl:common.enquiryFinancePanel.$form.replaceWith(n.successContent)},error:function(){alert("Your enquiry could not be processed. Please contact Turners directly.")}})}},helpers:{compileForm:function(){var n=common.enquiryFinancePanel.$form.find("input, select");return common.functions.serializeObject(n)}}};common.financeCalculator={getUrl:"/Client/Finance/Calculator",submitUrl:"/Client/Finance/CalculateSubmit",submitEmailUrl:"/Client/Finance/CalculatorEmailSubmit",submitQuestionsUrl:"/Client/Finance/CalculatorQuestionsSubmit",urlFinanceTooltip:"/Client/Finance/FinanceTooltipByCalculator",$form:null,$udcForm:null,divisionId:null,isTruckFinancePage:null,init:function(){$(document).on("click",".insert-trigger-finance-calc",common.financeCalculator.eventHandlers.getClick);$(document).on("click",".insert-trigger-finance-block-calc",common.financeCalculator.eventHandlers.getBlockClick);$(document).on("click",".insert-trigger-finance-calc-close",common.financeCalculator.eventHandlers.closeClick);$(document).on("click",".finance-tooltip-calc-trigger",common.financeCalculator.eventHandlers.toolTipOpenClick);common.financeCalculator.$form=$(".loan-calculator-form");common.financeCalculator.$form.length>0&&common.financeCalculator.initCalculator()},initCalculator:function(){common.financeCalculator.divisionId=$(".finance-calc-container").data("divisionid");$(".insert-trigger-finance-calc-close").click(common.financeCalculator.eventHandlers.closeClick);$(".loan-calculator-form").find("input,select").change(common.financeCalculator.eventHandlers.formChange);$(".finance-calc-container .email-results-trigger").click(common.financeCalculator.eventHandlers.emailClick);$(".finance-calc-container .email-results-close-trigger").click(common.financeCalculator.eventHandlers.emailCloseClick);$(".finance-calc-container .questions-trigger").click(common.financeCalculator.eventHandlers.questionsClick);$(".finance-calc-container .questions-close-trigger").click(common.financeCalculator.eventHandlers.questionsCloseClick);$.validator.unobtrusive.parse($(".finance-calc-container .loan-calculator-email-form"));$(".finance-calc-container .loan-calculator-email-form").data("validator").settings.submitHandler=common.financeCalculator.eventHandlers.emailSubmit;$.validator.unobtrusive.parse($(".finance-calc-container .loan-calculator-questions-form"));$(".finance-calc-container .loan-calculator-questions-form").data("validator").settings.submitHandler=common.financeCalculator.eventHandlers.questionsSubmit;common.financeCalculator.initApplyFinance()},initApplyFinance:function(n){common.financeCalculator.$udcForm=$(".udc-form");common.financeCalculator.$udcForm.length>0?(common.financeCalculator.isTruckFinancePage=!0,$(".finance-calc-container .apply-link").removeAttr("href"),$(".finance-calc-container .apply-link").click(common.financeCalculator.eventHandlers.scrollIntoUdcForm)):n!=null&&n!=undefined&&$(".finance-calc-container .apply-link").attr("href",data.ApplyLink)},eventHandlers:{getClick:function(n){var t;n.preventDefault();$(".finance-calc-container").length>0?$(".finance-calc-container").closest(".insert-slider").hasClass("visible")?$(".insert-slider").removeClass("visible"):$(this).closest(".finance-calc-trigger-container").next().hasClass("insert-slider").length>0?($(".finance-calc-container").closest(".insert-slider").addClass("visible"),common.functions.scrollIntoView($(financeCalcScroll))):(t=window.matchMedia("(max-width: 767px)"),t.matches?$(financeCalcMobile).closest(".finance-calc-trigger-container").after($(".finance-calc-container").closest(".insert-slider")):$(financeCalcTablet).closest(".finance-calc-trigger-container").after($(".finance-calc-container").closest(".insert-slider")),$(".finance-calc-container").closest(".insert-slider").addClass("visible"),common.functions.scrollIntoView($(financeCalcScroll))):(t=window.matchMedia("(max-width: 767px)"),t.matches?common.financeCalculator.serverRequests.getCalculator($(financeCalcMobile).closest(".finance-calc-trigger-container"),$(this).data("blockid"),$(this).data("divisionid")):common.financeCalculator.serverRequests.getCalculator($(financeCalcTablet).closest(".finance-calc-trigger-container"),$(this).data("blockid"),$(this).data("divisionid")))},getBlockClick:function(n){n.preventDefault();$(".finance-calc-container").length>0?$(".finance-calc-container").closest(".insert-slider").hasClass("visible")?$(".insert-slider").removeClass("visible"):$(this).closest(".finance-calc-trigger-container").next().hasClass("insert-slider").length>0?$(".finance-calc-container").closest(".insert-slider").addClass("visible"):($(this).closest(".finance-calc-trigger-container").after($(".finance-calc-container").closest(".insert-slider")),$(".finance-calc-container").closest(".insert-slider").addClass("visible")):common.financeCalculator.serverRequests.getCalculator($(this).closest(".finance-calc-trigger-container"),$(this).data("blockid"),$(this).data("divisionid"))},closeClick:function(n){n.preventDefault();$(".insert-slider").removeClass("visible")},formChange:function(n){n.preventDefault();$(".finance-calc-container").find(".result").empty();var i=$(".finance-calc-container").find("input, select"),t=common.functions.serializeObject(i);t.DivisionId=common.financeCalculator.divisionId;common.financeCalculator.serverRequests.submitCalculation(t)},emailClick:function(n){n.preventDefault();$(".finance-calc-container .loan-calculator-email-form").hasClass("visible")?$(".finance-calc-container .loan-calculator-email-form").removeClass("visible"):($(".finance-calc-container .loan-calculator-questions-form").removeClass("visible"),$(".finance-calc-container .loan-calculator-email-form").addClass("visible"))},emailCloseClick:function(n){n.preventDefault();$(".finance-calc-container .loan-calculator-email-form").removeClass("visible")},emailSubmit:function(){var t=$(".finance-calc-container").find("input, select"),n=common.functions.serializeObject(t);n.DivisionId=common.financeCalculator.divisionId;common.financeCalculator.serverRequests.submitCalculatorEmail(n)},questionsClick:function(n){n.preventDefault();$(".finance-calc-container .loan-calculator-questions-form").hasClass("visible")?$(".finance-calc-container .loan-calculator-questions-form").removeClass("visible"):($(".finance-calc-container .loan-calculator-email-form").removeClass("visible"),$(".finance-calc-container .loan-calculator-questions-form").addClass("visible"))},questionsCloseClick:function(n){n.preventDefault();$(".finance-calc-container .loan-calculator-questions-form").removeClass("visible")},questionsEnquiryCloseClick:function(n){n.preventDefault();$(".insert-slider").removeClass("visible")},questionsSubmit:function(){var t=$(".finance-calc-container").find("input, select"),n=common.functions.serializeObject(t);n.DivisionId=common.financeCalculator.divisionId;common.financeCalculator.serverRequests.submitCalculatorQuestions(n)},toolTipOpenClick:function(n){n.preventDefault();var i=$(".finance-calc-container").find("input, select"),t=common.functions.serializeObject(i);t.divisionIndex=common.financeCalculator.divisionId;common.financeCalculator.serverRequests.openFinanceTooltip(t)},scrollIntoUdcForm:function(){common.functions.scrollIntoView(common.financeCalculator.$udcForm)}},serverRequests:{getCalculator:function(n,t,i){var r={pageId:common.pageId,blockId:t,divisionIndex:i},u=null;typeof goodPage!="undefined"&&(u=goodPage.buyNowPrice);$.ajax({type:"GET",url:common.financeCalculator.getUrl,data:r,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(t){t.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"WantFinance","Load","",common.financeCalculator.getUrl):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"WantFinance","Load","",common.financeCalculator.getUrl),n.after(t.htmlContent),common.financeCalculator.initCalculator(),setTimeout(function(){$(".finance-calc-container").closest(".insert-slider").addClass("visible");common.functions.scrollIntoView($(financeCalcScroll))},20))},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"WantFinance","Load","",common.financeCalculator.getUrl)}})},submitCalculation:function(n){var t=null;typeof goodPage!="undefined"&&(t=goodPage.buyNowPrice);n.pageId=common.pageId;$(".finance-calc-container .actions button:not(.insert-trigger-finance-calc-close)").attr("disabled",!0);$.ajax({type:"POST",url:common.financeCalculator.submitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"WantFinance","Calculate","",common.financeCalculator.submitUrl),$(".finance-calc-container .results .error-col").text(n.errorMessage),$(".finance-calc-container .results").addClass("errors")):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"WantFinance","Calculate","",common.financeCalculator.submitUrl),$(".finance-calc-container .result.payment-weekly").text(n.WeeklyPaymentAmount),$(".finance-calc-container .result.payment-monthly").text(n.MonthlyPaymentAmount),$(".finance-calc-container .result.interest-rate").text(n.FinanceInterestRate),$(".finance-calc-container .result.interest-amount").text(n.TotalInterestAmount),$(".finance-calc-container .result.repayment-amount").text(n.RepaymentAmount),$(".finance-calc-container .result.total-years").text(n.TotalYears),$(".finance-calc-container .results").removeClass("errors"),common.financeCalculator.isTruckFinancePage!==!0&&$(".finance-calc-container .apply-link").attr("href",n.ApplyLink),$(".finance-calc-container .actions button:not(.insert-trigger-finance-calc-close)").removeAttr("disabled",!0))},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"WantFinance","Calculate","",common.financeCalculator.submitUrl);$(".finance-calc-container .results .error-col").text("An error has occurred. Please refresh the page and try again or contact Turners directly.");$(".finance-calc-container .results").addClass("errors")}})},submitCalculatorEmail:function(n){var t=null;typeof goodPage!="undefined"&&(t=goodPage.buyNowPrice);n.pageId=common.pageId;$(".finance-calc-container .loan-calculator-email-form button:not(.email-results-close-trigger)").attr("disabled",!0);$.ajax({type:"POST",url:common.financeCalculator.submitEmailUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"WantFinance","Email Submit","",common.financeCalculator.submitEmailUrl),$(".finance-calc-container .loan-calculator-email-form .loan-calculator-email-error").text(n.errorMessage),$(".finance-calc-container .loan-calculator-email-form .loan-calculator-email-error").addClass("visible"),$(".finance-calc-container .loan-calculator-email-form button:not(.email-results-close-trigger)").removeAttr("disabled")):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"WantFinance","Email Submit","",common.financeCalculator.submitEmailUrl),$(".finance-calc-container .loan-calculator-email-results").html(n.htmlContent),$(".finance-calc-container .loan-calculator-email-form").removeClass("visible"),$(".finance-calc-container .loan-calculator-email-results").addClass("visible"))},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"WantFinance","Email Submit","",common.financeCalculator.submitEmailUrl);$(".finance-calc-container .loan-calculator-email-form .loan-calculator-email-error").text("An error has occurred. Please refresh the page and try again or contact Turners directly.");$(".finance-calc-container .loan-calculator-email-form .loan-calculator-email-error").addClass("visible");$(".finance-calc-container .loan-calculator-email-form button:not(.email-results-close-trigger)").removeAttr("disabled")}})},submitCalculatorQuestions:function(n){var t=null;typeof goodPage!="undefined"&&(t=goodPage.buyNowPrice);n.pageId=common.pageId;$(".finance-calc-container .loan-calculator-questions-form button:not(.questions-close-trigger)").attr("disabled",!0);$.ajax({type:"POST",url:common.financeCalculator.submitQuestionsUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"WantFinance","Question Submit","",common.financeCalculator.submitQuestionsUrl),$(".finance-calc-container .loan-calculator-questions-form .loan-calculator-questions-error").text(n.errorMessage),$(".finance-calc-container .loan-calculator-questions-form .loan-calculator-questions-error").addClass("visible"),$(".finance-calc-container .loan-calculator-questions-form button:not(.questions-close-trigger)").removeAttr("disabled")):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"WantFinance","Question Submit","",common.financeCalculator.submitQuestionsUrl),$(".finance-calc-container .loan-calculator-email-results").html(n.htmlContent),$(".finance-calc-container .loan-calculator-questions-form").removeClass("visible"),$(".finance-calc-container .loan-calculator-email-results").addClass("visible"))},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"WantFinance","Question Submit","",common.financeCalculator.submitQuestionsUrl);$(".finance-calc-container .loan-calculator-questions-form .loan-calculator-questions-error").text("An error has occurred. Please refresh the page and try again or contact Turners directly.");$(".finance-calc-container .loan-calculator-questions-form .loan-calculator-questions-error").addClass("visible");$(".finance-calc-container .loan-calculator-questions-form button:not(.questions-close-trigger)").removeAttr("disabled")}})},openFinanceTooltip:function(n){n.pageId=common.pageId;$.ajax({type:"GET",url:common.financeCalculator.urlFinanceTooltip,data:n,traditional:!0,cache:!1,timeout:3e4,success:function(n){common.overlay.openContent(n)},error:function(){}})}},helpers:{compileForm:function(){var n=common.financeCalculator.$form.find("input, select");return common.functions.serializeObject(n)}}};$(document).ready(function(){common.comments.init()});common.comments={init:function(){$(window).smartresize(function(){common.comments.helpers.commentToggleReadMore()});$(".readmore-trigger").click(function(){var n=$(this).parents(".comment-block").hasClass("expand-comment-block")?"Read More":"Read Less";$(this).text(n);$(this).parents(".comment-block").toggleClass("expand-comment-block")})},helpers:{commentToggleReadMore:function(){var n=$(".comments-module .comment-block"),t=$(this);n.each(function(){var t=n.find(".readmore-trigger"),i=n.find(".content"),r=i.innerHeight();r>=195?t.addClass("active"):t.removeClass("active")})}}};$(document).ready(function(){$("body").on("click",".filterbox-module .criteria-heading",function(){$(".filter-items").hasClass("expand-filterbox-items")?$(".filter-items").addClass("expand-filterbox-items"):$(".filter-items").removeClass("expand-filterbox-items")});$(".filterbox-module .filter-item").click(function(){$(this).remove()});$(".change-search-trigger").click(searchPanel.eventHandlers.openClick)});common.productCarousel={resultsCount:null,resultsPageSize:null,resultsNumPages:null,$similarCarouselContainer:null,$pagingContainers:null,init:{page:function(n){common.productCarousel.$similarCarouselContainer=n.find(".product-carousel");common.productCarousel.$pagingContainers=$(".carousel-controls");n.find("img.productblock-lazy-images").lazyload({threshold:300,effect:"fadeIn",placeholder:""});$(".tiny-product-blocks-container img.lazy").lazyload({threshold:300,effect:"fadeIn",placeholder:""});common.productCarousel.resultsCount=common.productCarousel.$similarCarouselContainer.data("resultscount");common.productCarousel.init.paging();$(document).on("click",".results-pagelink",common.productCarousel.eventHandlers.pageClick);$(window).on("resize",common.productCarousel.eventHandlers.onResize)},paging:function(n){common.productCarousel.resultsPageSize=common.productCarousel.helpers.calculatePageSize();common.productCarousel.resultsNumPages=common.productCarousel.helpers.calculateNumberPages();common.paging.init(common.productCarousel.$pagingContainers,common.productCarousel.resultsPageSize,common.productCarousel.resultsNumPages,n);common.productCarousel.helpers.showHideItems()}},eventHandlers:{pageClick:function(n){n.preventDefault();var t=$(this),i=t.data("pageno");common.paging.init(common.productCarousel.$pagingContainers,common.productCarousel.resultsPageSize,common.productCarousel.resultsNumPages,i);common.productCarousel.helpers.showHideItems();common.productCarousel.$similarCarouselContainer.find("img.productblock-lazy-images").lazyload({threshold:300,effect:"fadeIn",placeholder:""})},onResize:function(n){n.preventDefault();var t=common.productCarousel.helpers.calculatePageSize();t!=common.productCarousel.resultsPageSize&&common.productCarousel.init.paging()}},helpers:{calculatePageSize:function(){var n=common.productCarousel.helpers.getWindowSize();return common.productCarousel.resultsCount<1?0:n<1160?3:4},calculateNumberPages:function(){var n=common.productCarousel.helpers.getWindowSize();return common.productCarousel.resultsCount<1?0:n<1160?common.productCarousel.resultsCount<3?1:common.productCarousel.resultsCount-2:common.productCarousel.resultsCount<4?1:common.productCarousel.resultsCount-3},showHideItems:function(){if(common.productCarousel.$similarCarouselContainer.find(".product-block").removeClass("visible"),common.paging.currentPage>0){var n=common.paging.helpers.getStartVisibleIndex(),t=common.paging.helpers.getEndVisibleIndex(),i=common.productCarousel.helpers.getWindowSize();common.productCarousel.$similarCarouselContainer.find(".product-block").each(function(i,r){i>=n&&i<=t&&$(r).addClass("visible")})}},getWindowSize:function(){return window.innerWidth}}};$(document).ready(function(){$(".page-sidebar-menu").length&&(jQuery(".page-sidebar-menu-trigger").click(function(){jQuery(".page-sidebar-menu > ul").toggleClass("open-sidebar-menu");jQuery(this).toggleClass("active")}),jQuery(".page-sidebar-menu > ul > li").each(function(){jQuery(this).has("ul").addClass("parent")}),jQuery(".page-sidebar-menu .parent").each(function(){jQuery(this).find("> a").append('<span class="menu-toggle"><\/span>')}),jQuery(".page-sidebar-menu .parent > a").click(function(n){n.preventDefault();jQuery(this).parent("li").toggleClass("open-sub-menu")}))});common.turnersLive={updateUrl:"/Client/TurnersLive/UpdateOverlay",updateSubmitUrl:"/Client/TurnersLive/UpdateOverlaySubmit",removeUrl:"/Client/TurnersLive/RemoveOverlay",removeSubmitUrl:"/Client/TurnersLive/RemoveOverlaySubmit",$updateOverlayForm:null,$removeOverlayForm:null,init:{page:function(){$(".update-turners-live-trigger").click(common.turnersLive.eventHandlers.updateClick);$(".remove-turners-live-trigger").click(common.turnersLive.eventHandlers.removeClick)},updateOverlayForm:function(){common.turnersLive.$updateOverlayForm=$(".update-turners-live-form");common.turnersLive.$updateOverlayForm.length>0&&($.validator.unobtrusive.parse(common.turnersLive.$updateOverlayForm),common.turnersLive.$updateOverlayForm.data("validator").settings.submitHandler=common.turnersLive.eventHandlers.updateOverlaySubmit);$("#closeButton").click(common.turnersLive.eventHandlers.close)},removeOverlayForm:function(){common.turnersLive.$removeOverlayForm=$(".remove-turners-live-form");common.turnersLive.$removeOverlayForm.length>0&&common.turnersLive.$removeOverlayForm.submit(common.turnersLive.eventHandlers.removeOverlaySubmit);$("#closeButton").click(common.turnersLive.eventHandlers.close)}},eventHandlers:{updateClick:function(n){n.preventDefault();common.turnersLive.serverRequests.openUpdateOverlay()},updateOverlaySubmit:function(){var n=common.turnersLive.helpers.compileForm();common.turnersLive.serverRequests.submitUpdateOverlay(n)},removeClick:function(n){n.preventDefault();common.turnersLive.serverRequests.openRemoveOverlay()},removeOverlaySubmit:function(n){n.preventDefault();common.turnersLive.serverRequests.submitRemoveOverlay()},close:function(n){n.preventDefault();common.overlay.close()},refresh:function(n){n.preventDefault();location.reload(!0)}},serverRequests:{openUpdateOverlay:function(){$.ajax({type:"GET",url:common.turnersLive.updateUrl,traditional:!0,cache:!1,timeout:3e4,success:function(n){!n.error&&n.showProfileForm?common.minProfile.init.module(n,common.functions.refreshPage):(common.overlay.openModalContent(n),common.turnersLive.helpers.postOpenUpdateOverlay())},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"TurnersLive",!1,common.turnersLive.serverRequests.openUpdateOverlay)||alert("An error has occurred. Please try again or contact Turners directly")}})},submitUpdateOverlay:function(n){$.ajax({type:"POST",url:common.turnersLive.updateSubmitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){!n.error&&n.showProfileForm?common.minProfile.init.module(n,common.functions.refreshPage):n.isRedirect===!0?window.location=n.redirectUrl:(common.turnersLive.$updateOverlayForm.replaceWith(n.formContent),common.turnersLive.init.updateOverlayForm())},error:function(){}})},openRemoveOverlay:function(){$.ajax({type:"GET",url:common.turnersLive.removeUrl,traditional:!0,cache:!1,timeout:3e4,success:function(n){common.overlay.openModalContent(n);common.turnersLive.helpers.postOpenRemoveOverlay()},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"TurnersLive",!1,common.turnersLive.serverRequests.openRemoveOverlay)||alert("An error has occurred. Please try again or contact Turners directly")}})},submitRemoveOverlay:function(){$.ajax({type:"POST",url:common.turnersLive.removeSubmitUrl,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){common.turnersLive.helpers.postSubmitRemoveOverlay(n)},error:function(){}})}},helpers:{postOpenUpdateOverlay:function(){common.turnersLive.init.updateOverlayForm()},postOpenRemoveOverlay:function(){common.turnersLive.init.removeOverlayForm()},postSubmitRemoveOverlay:function(n){common.overlay.openModalContent(n.content);n.error?common.turnersLive.init.removeOverlayForm():$("#closeButton").click(common.turnersLive.eventHandlers.refresh)},compileForm:function(){var n=common.turnersLive.$updateOverlayForm.find("input");return common.functions.serializeObject(n)}}};common.tradeMe={updateUrl:"/Client/TradeMe/UpdateOverlay",updateSubmitUrl:"/Client/TradeMe/UpdateOverlaySubmit",removeUrl:"/Client/TradeMe/RemoveOverlay",removeSubmitUrl:"/Client/TradeMe/RemoveOverlaySubmit",$updateOverlayForm:null,$removeOverlayForm:null,init:{page:function(){$(".update-trade-me-trigger").click(common.tradeMe.eventHandlers.updateClick);$(".remove-trade-me-trigger").click(common.tradeMe.eventHandlers.removeClick)},updateOverlayForm:function(){common.tradeMe.$updateOverlayForm=$(".update-trade-me-form");common.tradeMe.$updateOverlayForm.length>0&&($.validator.unobtrusive.parse(common.tradeMe.$updateOverlayForm),common.tradeMe.$updateOverlayForm.data("validator").settings.submitHandler=common.tradeMe.eventHandlers.updateOverlaySubmit,common.tradeMe.$updateOverlayForm.find("#closeButton").click(common.tradeMe.eventHandlers.close))},removeOverlayForm:function(){common.tradeMe.$removeOverlayForm=$(".remove-trade-me-form");common.tradeMe.$removeOverlayForm.submit(common.tradeMe.eventHandlers.removeOverlaySubmit);common.tradeMe.$removeOverlayForm.find("#closeButton").click(common.tradeMe.eventHandlers.close)}},eventHandlers:{updateClick:function(n){n.preventDefault();common.tradeMe.serverRequests.openUpdateOverlay()},updateOverlaySubmit:function(){var n=common.tradeMe.helpers.compileForm();common.tradeMe.serverRequests.submitUpdateOverlay(n)},removeClick:function(n){n.preventDefault();common.tradeMe.serverRequests.openRemoveOverlay()},removeOverlaySubmit:function(n){n.preventDefault();common.tradeMe.serverRequests.submitRemoveOverlay()},close:function(n){n.preventDefault();common.overlay.close()},refresh:function(n){n.preventDefault();location.reload(!0)}},serverRequests:{openUpdateOverlay:function(){$.ajax({type:"GET",url:common.tradeMe.updateUrl,traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"TradeMe","1st Step Add","",common.tradeMe.updateUrl):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"TradeMe","1st Step Add","",common.tradeMe.updateUrl);!n.error&&n.showProfileForm?common.minProfile.init.module(n,common.functions.refreshPage):(common.overlay.openModalContent(n),common.tradeMe.helpers.postOpenUpdateOverlay())},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"TradeMe",!1,common.tradeMe.serverRequests.openUpdateOverlay)||(common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"TradeMe","1st Step Add","",common.tradeMe.updateUrl),alert("An error has occurred. Please try again or contact Turners directly"))}})},submitUpdateOverlay:function(n){$.ajax({type:"POST",url:common.tradeMe.updateSubmitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"TradeMe","2nd Step Add","",common.tradeMe.updateSubmitUrl):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"TradeMe","2nd Step Add","",common.tradeMe.updateSubmitUrl);!n.error&&n.showProfileForm?common.minProfile.init.module(n,common.functions.refreshPage):n.isRedirect===!0?window.location=n.redirectUrl:(common.tradeMe.$updateOverlayForm.replaceWith(n.formContent),common.tradeMe.init.updateOverlayForm())},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"TradeMe","2nd Step Add","",common.tradeMe.updateSubmitUrl)}})},openRemoveOverlay:function(){$.ajax({type:"GET",url:common.tradeMe.removeUrl,traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error===!0?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"TradeMe","1st Step Remove","",common.tradeMe.removeUrl),n.showErrorContent===!0&&(common.overlay.openModalContent(n.errorContent),common.tradeMe.helpers.postOpenUpdateOverlay())):(common.overlay.openModalContent(n),common.tradeMe.helpers.postOpenRemoveOverlay(),common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"TradeMe","1st Step Remove","",common.tradeMe.removeUrl))},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"TradeMe",!1,common.tradeMe.serverRequests.openRemoveOverlay)||(alert("An error has occurred. Please try again or contact Turners directly"),common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"TradeMe","1st Step Remove","",common.tradeMe.removeUrl))}})},submitRemoveOverlay:function(){$.ajax({type:"POST",url:common.tradeMe.removeSubmitUrl,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){common.tradeMe.helpers.postSubmitRemoveOverlay(n)},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"TradeMe","2nd Step Remove","",common.tradeMe.removeSubmitUrl)}})}},helpers:{postOpenUpdateOverlay:function(){common.tradeMe.init.updateOverlayForm()},postOpenRemoveOverlay:function(){common.tradeMe.init.removeOverlayForm()},postSubmitRemoveOverlay:function(n){common.overlay.openModalContent(n.content);n.error?(common.tradeMe.init.removeOverlayForm(),common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"TradeMe","2nd Step Remove","",common.tradeMe.removeSubmitUrl)):($("#closeButton").click(common.tradeMe.eventHandlers.refresh),common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"TradeMe","2nd Step Remove","",common.tradeMe.removeSubmitUrl))},compileForm:function(){var n=common.tradeMe.$updateOverlayForm.find("input");return common.functions.serializeObject(n)}}};common.savedSearch={formUrl:"/Client/{0}/SavedSearch",submitUrl:"/Client/{0}/SavedSearchSubmit",$form:null,divisionName:null,searchFilters:null,init:{form:function(){common.savedSearch.$form=$(".saved-search-form");common.savedSearch.$form.length>0&&($.validator.unobtrusive.parse(common.savedSearch.$form),common.savedSearch.$form.data("validator").settings.submitHandler=common.savedSearch.eventHandlers.submit,common.savedSearch.$form.find("#closeButton").click(common.savedSearch.eventHandlers.close),common.savedSearch.$form.find(".add-search-trigger").click(common.savedSearch.eventHandlers.addSearchClick),common.savedSearch.$form.find(".update-search-trigger").click(common.savedSearch.eventHandlers.updateSearchClick))},complete:function(){$("#closeButton").click(common.savedSearch.eventHandlers.close)}},eventHandlers:{submit:function(){var n=common.savedSearch.helpers.compileForm();common.savedSearch.serverRequests.submitSavedSearch(n)},close:function(n){n.preventDefault();common.overlay.close()},refresh:function(n){n.preventDefault();location.reload(!0)},addSearchClick:function(n){n.preventDefault();$(this).closest(".search-option").remove();$(".add-search").addClass("visible");$(".save-search-button").addClass("visible")},updateSearchClick:function(n){n.preventDefault();$(this).closest(".search-option").remove();$(".update-search").addClass("visible");$(".save-search-button").addClass("visible")}},serverRequests:{openForm:function(){var n=common.functions.stringFormat(common.savedSearch.formUrl,common.savedSearch.divisionName),t={filters:common.savedSearch.searchFilters};$.ajax({type:"POST",url:n,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(t){common.overlay.openModalContent(t);common.savedSearch.helpers.postOpenForm();t.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"SavedSearch","Start Submit","",n):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"SavedSearch","Start Submit","",n)},error:function(t){common.login.overlay.eventHandlers.ajaxUnauthorised(t.status,"SavedSearch",!1,common.savedSearch.serverRequests.openForm)||(common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"SavedSearch","Start Submit","",n),alert("An error has occurred. Please try again or contact Turners directly"))}})},submitSavedSearch:function(n){var t=common.functions.stringFormat(common.savedSearch.submitUrl,common.savedSearch.divisionName);n.filters=common.savedSearch.searchFilters;$.ajax({type:"POST",url:t,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",traditional:!0,cache:!1,timeout:3e4,success:function(n){common.savedSearch.helpers.postSubmitSavedSearch(n,t)},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"SavedSearch","Submit","",t);alert("An error has occurred. Please try again or contact Turners directly")}})}},helpers:{openForm:function(n,t){common.savedSearch.divisionName=n;common.savedSearch.searchFilters=t;common.savedSearch.serverRequests.openForm()},postOpenForm:function(){common.savedSearch.init.form()},postSubmitSavedSearch:function(n,t){n.error?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"SavedSearch","Submit","",t),common.savedSearch.$form.replaceWith(n.formContent),common.savedSearch.init.form()):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"SavedSearch","Submit","",t),common.overlay.openModalContent(n.successContent),common.savedSearch.init.complete(),$(".wizard-banner-container").length>0&&$(".wizard-banner-container").replaceWith(n.saveSearchConfirmationBanner))},compileForm:function(){var n=common.savedSearch.$form.find("input, select");return common.functions.serializeObject(n)}}};common.slideshow={init:function(){$(".slideshow").owlCarousel({navigation:!0,navigationText:['<span class="icon-angle-left"><\/span>','<span class="icon-angle-right"><\/span>'],slideSpeed:500,lazyLoad:!0,autoPlay:1e4,stopOnHover:!0,addClassActive:!0,paginationSpeed:500,singleItem:!0});$(".full-width-image-slideshow").owlCarousel({navigation:!0,navigationText:['<span class="icon-angle-left"><\/span>','<span class="icon-angle-right"><\/span>'],slideSpeed:500,lazyLoad:!0,autoPlay:1e4,addClassActive:!0,paginationSpeed:500,singleItem:!0,afterInit:$(".full-width-image-slideshow").removeClass("hide"),beforeMove:function(n){n.find(".active").addClass("loaded")}});$(document).on("click",".full-width-image-slideshow .owl-item .slide, .slideshow .owl-item .slide",common.slideshow.eventHandlers.slideClick)},eventHandlers:{slideClick:function(n){var r=window.innerWidth,t,i;r<768&&(n.preventDefault(),t=$(this).find(".content a"),i=t.attr("href"),window.location=i)}}};$(document).ready(function(){modulecategoriesShowcase.init()});modulecategoriesShowcase={init:function(){enquire.register("screen and (max-width: 1024px)",{match:function(){$(".categories-showcase .categories a").click(common.mainMenu.eventHandlers.SSMenuOpenDivision);$(".page-block-container .home-page-btn .category").click(common.mainMenu.eventHandlers.SSMenuOpenDivision)},unmatch:function(){modulecategoriesShowcase.helpers.normalizeLinks()}})},helpers:{normalizeLinks:function(){var n=$(".categories-showcase .categories a"),t=$(this);n.each(function(){$(this).unbind("click")})}}};common.emailFriends={openOverlayUrl:"/Client/Content/EmailAFriend",submitOverlayUrl:"/Client/Content/EmailAFriendSubmit",$overlayForm:null,$captchaResponseField:null,init:{module:function(){$(".email-friend-trigger").click(common.emailFriends.eventHandlers.openEmailFriendsOverlay)},overlay:function(){common.emailFriends.$overlayForm=$(".email-friend-form");common.emailFriends.$captchaResponseField=common.emailFriends.$overlayForm.find("#captchaResponse");$.validator.unobtrusive.parse(common.emailFriends.$overlayForm);common.emailFriends.$overlayForm.data("validator").settings.submitHandler=common.emailFriends.eventHandlers.overlayFormSubmit;$("#closeButton").click(common.emailFriends.eventHandlers.closeOverlay)}},eventHandlers:{openEmailFriendsOverlay:function(n){n.preventDefault();common.emailFriends.serverRequests.getEmailFriendsOverlay()},closeOverlay:function(n){n.preventDefault();common.overlay.close()},overlayFormSubmit:function(){var n=common.emailFriends.helpers.compileOverlayForm();common.emailFriends.serverRequests.submitEmailFriendsOverlay(n)},captchaCallback:function(n){common.emailFriends.$captchaResponseField.val(n)}},serverRequests:{getEmailFriendsOverlay:function(){var t={pageId:common.pageId},n=null;typeof goodPage!="undefined"&&(n=goodPage.buyNowPrice);$.ajax({type:"GET",url:common.emailFriends.openOverlayUrl,data:t,traditional:!0,cache:!1,timeout:3e4,success:function(t){common.emailFriends.helpers.postGetEmailFriendsOverlay(t,n)},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"EmailFriend","Start","",common.emailFriends.openOverlayUrl);alert("An error has occurred. Please try again or contact Turners directly")}})},submitEmailFriendsOverlay:function(n){var t=null;typeof goodPage!="undefined"&&(t=goodPage.buyNowPrice);$.ajax({type:"POST",url:common.emailFriends.submitOverlayUrl,data:n,traditional:!0,cache:!1,timeout:3e4,success:function(n){common.emailFriends.helpers.postSubmitEmailFriends(n,t)},error:function(){common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"EmailFriend","Submit","",common.emailFriends.submitOverlayUrl);alert("An error has occurred. Please try again or contact Turners directly")}})}},helpers:{postGetEmailFriendsOverlay:function(n){n.error?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"EmailFriend","Start","",common.emailFriends.openOverlayUrl),alert(n.errorMessage)):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"EmailFriend","Start","",common.emailFriends.openOverlayUrl),common.overlay.openContent(n.overlayContent),common.emailFriends.init.overlay())},compileOverlayForm:function(){var t=common.emailFriends.$overlayForm.find("textarea, input"),n=common.functions.serializeObject(t);return n.pageId=common.pageId,n.pageUrl=window.location.href,n},postSubmitEmailFriends:function(n){n.error?(common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"EmailFriend","Submit","",common.emailFriends.submitOverlayUrl),common.emailFriends.$overlayForm.replaceWith(n.errorFormContent),common.emailFriends.init.overlay()):(common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"EmailFriend","Submit","",common.emailFriends.submitOverlayUrl),common.overlay.openContent(n.overlayContent))}}};common.loadStructure={fadeInContent:function(n,t,i,r){t.height("100%");TweenMax.to(n.find(".loading-module"),i,{opacity:"0",display:"none",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){n.find(".loading-module").addClass("stop-loading-animation");r!==null&&typeof r=="function"&&r()}});TweenMax.to(t,i,{opacity:"1",rotation:.001,ease:SlowMo.easeInOut,force3D:!0})},fadeOutContent:function(n,t,i,r){t.height(t.height());TweenMax.to(n.find(".loading-module"),i,{opacity:"1",display:"block",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){n.find(".loading-module").removeClass("stop-loading-animation");r!==null&&typeof r=="function"&&r()}});TweenMax.to(t,i,{opacity:"0",rotation:.001,ease:SlowMo.easeInOut,force3D:!0})},fadeInSearchPanel:function(n,t,i,r){var u=n.find(".loading-search");u.hasClass("stop-loading-animation")?TweenMax.to(t,i/2,{opacity:"1",display:"block",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){n.addClass("loaded");r!==null&&typeof r=="function"&&r()}}):TweenMax.to(n.find(".loading-search"),i/2,{opacity:"0",display:"none",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){n.find(".loading-search").addClass("stop-loading-animation");TweenMax.to(t,i/2,{opacity:"1",display:"block",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){n.addClass("loaded");r!==null&&typeof r=="function"&&r()}})}})},fadeOutSearchPanel:function(n,t,i,r){TweenMax.to(t,i/2,{opacity:"0",display:"none",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){n.find(".loading-search").removeClass("stop-loading-animation");TweenMax.to(n.find(".loading-search"),i/2,{opacity:"1",display:"block",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){r!==null&&typeof r=="function"&&r()}})}})},fadeOutSearchPanelNoLoading:function(n,t,i){TweenMax.to(n,t/2,{opacity:"0",display:"none",rotation:.001,ease:SlowMo.easeInOut,force3D:!0,onComplete:function(){i!==null&&typeof i=="function"&&i()}})}};common.turnersCertified={openOverlayUrl:"/Client/GoodItem/TurnersCertifiedOverlay",init:{module:function(){$(document).on("click",".turners-certified-trigger",common.turnersCertified.eventHandlers.openTurnersCertifiedOverlay)}},eventHandlers:{openTurnersCertifiedOverlay:function(n){n.preventDefault();common.turnersCertified.serverRequests.openTurnersCertifiedOverlay()},closeTurnersCertifiedOverlay:function(){}},serverRequests:{openTurnersCertifiedOverlay:function(){$.ajax({type:"POST",url:common.turnersCertified.openOverlayUrl,traditional:!0,cache:!1,timeout:3e4,success:function(n){common.turnersCertified.helpers.postGetTurnersCertifiedOverlay(n)},error:function(){alert("An error has occurred. Please try again or contact Turners directly")}})}},helpers:{postGetTurnersCertifiedOverlay:function(n){n.error||common.overlay.openContent(n.htmlContent)}}};common.paging={resultsPageSize:null,resultsNumPages:null,resultsCount:null,currentPage:null,$pagingContainer:null,init:function(n,t,i,r){common.paging.$pagingContainer=n;common.paging.resultsPageSize=t;common.paging.resultsNumPages=i;common.paging.helpers.createPagingLinks(r)},eventHandlers:{},helpers:{createPagingLinks:function(n){if(common.paging.resultsNumPages>0){var t="",i="";common.paging.$pagingContainer.empty();n?(common.paging.currentPage=n>common.paging.resultsNumPages?common.paging.resultsNumPages:n,n>=common.paging.resultsNumPages&&(i="disabled"),n==1&&(t="disabled")):(common.paging.currentPage=1,t="disabled",common.paging.resultsNumPages==1&&(i="disabled"));common.paging.$pagingContainer.append('<button class= "text-button results-pagelink previous" data-pageno="'+(common.paging.currentPage-1)+'"'+t+'> <span class="icon-angle-left"><\/span><\/button><button class= "text-button results-pagelink next " data-pageno="'+(common.paging.currentPage+1)+'"'+i+'> <span class="icon-angle-right"><\/span><\/button>')}else common.paging.currentPage=0},getStartVisibleIndex:function(){if(common.paging.currentPage>0)return common.paging.currentPage-1},getEndVisibleIndex:function(){if(common.paging.currentPage>0){var n=common.paging.helpers.getWindowSize();return n<768?common.paging.currentPage:common.paging.currentPage+common.paging.resultsPageSize-2}},getWindowSize:function(){return window.innerWidth}}};common.minProfile={submitUrl:"/Client/Account/MinimumProfileBuyNowSubmit",callback:null,cancelCallback:null,postalAddress:null,$postalContainer:null,init:{module:function(n,t,i){common.minProfile.callback=t;common.minProfile.cancelCallback=i;common.overlay.getOverlayElement()!=null&&common.overlay.closeForce();common.overlay.openModalContent(n.htmlContent);common.minProfile.init.form()},form:function(){common.minProfile.$postalContainer=$(".address-block.address-block-two");common.minProfile.postalAddress=new AddressBlock;common.minProfile.postalAddress.init(common.minProfile.$postalContainer,common.defaultAddressSource);$(".min-profile-overlay #closeButton").click(common.minProfile.eventHandlers.close);var n=$(".min-profile-overlay form");n.length>0&&($.validator.unobtrusive.parse(n),n.data("validator").settings.submitHandler=common.minProfile.eventHandlers.submit)},continueForm:function(){$(".min-profile-overlay #closeButton").click(common.minProfile.eventHandlers.close);$(".min-profile-overlay #ContinueButton").click(common.minProfile.eventHandlers.continueClicked)}},eventHandlers:{close:function(n){n.preventDefault();common.overlay.close();common.minProfile.cancelCallback!==null&&typeof common.minProfile.cancelCallback=="function"&&common.minProfile.cancelCallback()},submit:function(){$("#saveButton").prop("disabled",!0);var n=common.minProfile.helpers.compileForm();common.minProfile.serverRequests.submit(n)},continueClicked:function(n){n.preventDefault();common.minProfile.callback!==null&&typeof common.minProfile.callback=="function"&&common.minProfile.callback()}},serverRequests:{submit:function(n){var t=null;typeof goodPage!="undefined"&&(t=goodPage.buyNowPrice);$.ajax({type:"POST",url:common.minProfile.submitUrl,data:n,dataType:"json",traditional:!0,cache:!1,timeout:3e4,success:function(n){n.error?common.functions.notifyTurnersEvent(common.trackingResult.ERRORFROMRESPONSE,"MinProfile","Action Submit","",common.minProfile.submitUrl):common.functions.notifyTurnersEvent(common.trackingResult.SUCCESS,"MinProfile","Action Submit","",common.minProfile.submitUrl);n.error?($(".min-profile-overlay form").replaceWith(n.htmlContent),common.minProfile.init.form()):(common.overlay.openModalContent(n.htmlContent),common.minProfile.init.continueForm())},error:function(n){common.login.overlay.eventHandlers.ajaxUnauthorised(n.status,"MinProfile",!1,common.minProfile.callback)||(common.functions.notifyTurnersEvent(common.trackingResult.ERRORWITHREQUEST,"MinProfile","Action Submit","",common.minProfile.submitUrl),alert("An error occurred. Please try again or contact Turners directly"),$("#signInButton").prop("disabled",!1))}})}},helpers:{compileForm:function(){var t=$(".min-profile-overlay form input"),n=common.functions.serializeObject(t);return n.requestPageUrl=document.URL,n}}}